/*!CK:416098659!*//*1449045755,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["y\/DTJ"]); }

__d("CommentsPluginSentryAction",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CONFIRM_POST_TO_PROFILE:"confirm_post_to_profile"};},null);
__d("DeveloperCommentsModerationSource",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={APP:"app",URL:"url"};},null);
__d('CommentAdminPanelController',['Arbiter','AsyncRequest','Button','ChannelConstants','CSS','DOM','Event','Toggler','XD','URI','Vector','$','ge','MultiLoginPopup'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('XD').UnverifiedXD,i=function(j){Object.assign(this,{locale:j.locale,channel:j.channel,controllerID:j.controllerID,commentIDs:j.commentIDs,domIDs:j.domIDs,duplicateComments:[],fetchMoreCommentsIsPending:{},blacklistedActors:j.blacklistedActors,actorToCommentInfoMap:j.actorToCommentIDMap,commentInfoMap:j.commentInfoMap,inAggregatedView:j.inAggregatedView,inModerationQueue:j.inModerationQueue,inContextualDialog:j.inContextualDialog,isTopLevelCommentPollingEnabled:false,loggedIn:j.loggedIn,newestCommentTimestamp:j.newestCommentTimestamp,realTimePollingParams:{},userOwnsPages:j.userOwnsPages,recentlyBlacklistedActors:j.blacklistedActors});c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('comments_plugin_new_post'),(function(k,l){if(l.obj.target===this.realTimePollingParams.target){if(c('ge')(l.obj.comment_element_id))return;var m=babelHelpers._extends({},this.realTimePollingParams);m.post_fbid=l.obj.post_fbid;var n=l.obj.parent_comment_id;if(n){var o=c('ge')(n);if(!o)return;var p=c('DOM').scry(o,'.fbFeedbackPager.uiMorePager');if(p.length>0)return;m.parent_comment_id=n;m.is_reply_thread=true;}else{if(!this.isTopLevelCommentPollingEnabled)return;m.is_reply_thread=false;}this.pollForComments(m);}}).bind(this));this.controlledRegion=c('$')(this.controllerID);this.attachClickHandlers();if(this.inModerationQueue)this.registerModeratorQueueHandlers(true);};Object.assign(i,{allControllers:{},mainController:null,contextualControllers:{},initController:function(j){var k=new i(j),l=j.controllerID;i.allControllers[l]=k;if(k.inContextualDialog){i.contextualControllers[l]=k;}else i.mainController=k;},syncController:function(j,k){var l=i.allControllers[j];l.attachClickHandlers();if(!l.isControllingModerationQueue())return;l.deselectComments(k);l.registerModeratorQueueHandlers(false);l.synchronizeModeratorQueueUI();},resetController:function(j){var k=i.allControllers[j];k.resetController();},appendComments:function(j,k,l){var m=i.allControllers[j];m.appendComments(k,l);},prependComments:function(j,k,l){var m=i.allControllers[j];m.prependComments(k,l);},updateController:function(j,k,l,m,n,o,p){var q=i.allControllers[j];q.updateController(k,l,m,n,o,p);if(!i.mainController.loggedIn)c('MultiLoginPopup').reattachLoginInterceptors();if(!q.isControllingModerationQueue())return;q.registerModeratorQueueHandlers(false);q.synchronizeModeratorQueueUI();},updatePollingParamsCommentas:function(j,k){var l=i.allControllers[j];l.updatePollingParamsCommentas(k);},registerMoreCommentsLinkHandler:function(j,k){var l=i.allControllers[j];l.registerMoreCommentsLinkHandler(k);},replaceContentMaybe:function(j,k){var l=c('DOM').scry(document.documentElement,j)[0];if(l)c('DOM').replace(l,k);},notifyCommentCreated:function(j){if(!i.mainController.channel)return;h.send({type:'commentCreated',href:j.href,parentCommentID:j.parentCommentID,commentID:j.commentID,message:j.message});},notifyCommentRemoved:function(j){if(!i.mainController.channel)return;h.send({type:'commentRemoved',href:j.href,commentID:j.commentID});},markAsShowingAllReplies:function(j){var k=j+' a.fbUpDownVoteOption',l=c('DOM').scry(document.documentElement,k),m=j+' li.fbUpDownVoteOption a.itemAnchor',n=c('DOM').scry(document.documentElement,m),o=l.concat(n);for(var p=0;p<o.length;p++){var q=o[p],r=new (c('URI'))(q.getAttribute('ajaxify'));r.addQueryData({show_all_replies:1});q.setAttribute('ajaxify',r.toString());}},setLoggedIn:function(j){i.mainController.loggedIn=j;},blacklistChangeListener:function(j,k,l){var m=c('$')(k);c('Event').listen(j,'change',function(){if(j.options[j.selectedIndex].value==l){c('CSS').show(m);}else c('CSS').hide(m);});}});Object.assign(i.prototype,{isControllingModerationQueue:function(){var j=this==i.mainController&&this.inModerationQueue;return j;},resetController:function(){this.commentIDs=[];this.domIDs=[];},updateController:function(j,k,l,m,n,o){j.forEach(function(q){this.commentIDs.push(q);},this);k.forEach(function(q){this.domIDs.push(q);},this);Object.assign(this.blacklistedActors,m);for(var p in n){if(!this.actorToCommentInfoMap[p])this.actorToCommentInfoMap[p]=[];n[p].forEach(function(q){this.actorToCommentInfoMap[p].push(q);},this);}this.newestCommentTimestamp=Math.max(this.newestCommentTimestamp,l);Object.assign(this.commentInfoMap,o);this.attachClickHandlers();},updatePollingParamsCommentas:function(j){this.realTimePollingParams.commentas=j;},attachClickHandlers:function(){for(var j=0;j<this.domIDs.length;j++){var k='li[id="'+this.domIDs[j]+'"]',l=c('DOM').scry(this.controlledRegion,k);if(l.length===0)continue;var m=l[0],n=c('DOM').scry(m,'a.uiCloseButton');c('Event').listen(m,'mouseleave',this.closeStickyMenuFlyouts.bind(this,n));var o=c('DOM').scry(m,'.fbModerateDropdownContainer');if(o.length>0){var p=o[0],q=c('DOM').find(p,'.fbModerateDropdownLink');c('Event').listen(q,'mouseover',(function(z,event){c('CSS').addClass(z,'fbUnderlineText');}).bind(null,q));c('Event').listen(q,'mouseout',(function(z,event){c('CSS').removeClass(z,'fbUnderlineText');}).bind(null,q));var r=c('DOM').find(p,'.fbModerationDropdownList');c('Event').listen(q,'click',this.exposeDropDownMenu.bind(this,q,r));c('Event').listen(r.parentNode,'mouseleave',this.concealDropDownMenu.bind(this,q,r));this.attachDropDownHandlers(m,this.commentIDs[j],r);}var s=this.commentInfoMap[this.commentIDs[j]].actor,t=!!this.recentlyBlacklistedActors[s];if(t){var u=c('DOM').scry(m,'.fbUndoBlacklistLink');if(u.length>0){var v=u[0];c('Event').listen(v,'click',this.toggleBlackListAndSync.bind(this,this.commentIDs[j]));}}}var w=c('DOM').scry(this.controlledRegion,'.fbReplyButton'),x=c('DOM').scry(this.controlledRegion,'.fbReplyAfterLoginButton');for(var y=0;y<w.length;y++)if(this.loggedIn){c('CSS').show(w[y]);c('CSS').hide(x[y]);}else{c('CSS').hide(w[y]);c('CSS').show(x[y]);}},closeStickyMenuFlyouts:function(j,event){c('Toggler').hide();for(var k=0;k<j.length;k++)j[k].blur();},attachDropDownHandlers:function(j,k,l){var m=c('DOM').scry(l,'.fbBanUser');if(m.length>0){var n=m[0],o=c('DOM').find(n,'^.fbFeedbackPost');if(o.id.startsWith(k))c('Event').listen(n,'click',this.toggleBlackListAndSync.bind(this,k));}},exposeDropDownMenu:function(j,k,event){if(c('CSS').shown(k))return this.concealDropDownMenu(j,k,event);c('Event').stop(event);c('CSS').show(k);k.focus();j.blur();var l=c('DOM').find(document.documentElement,'.commentContent'),m=c('Vector').getElementPosition(k).y+c('Vector').getElementDimensions(k).y-c('Vector').getElementDimensions(l).y;if(m>0){m=m+2;this.menuBuffer=c('DOM').create('div',{className:'menuBuffer',style:{height:m+'px'}});c('DOM').appendContent(l,this.menuBuffer);}return false;},concealDropDownMenu:function(j,k,event){c('Event').stop(event);c('CSS').removeClass(j,'fbUnderlineText');c('CSS').hide(k);j.blur();if(this.menuBuffer){c('DOM').remove(this.menuBuffer);delete this.menuBuffer;}return false;},registerMoreCommentsLinkHandler:function(j){var k=j.pager_id;if(!c('ge')(k))return;var l=c('$')(k);c('Event').listen(l,'click',this.fetchMoreComments.bind(this,j,l));},deselectComments:function(j){for(var k=0;k<j.length;k++)delete this.selectedCommentsMap[j[k]];},registerModeratorQueueHandlers:function(j){if(j)this.selectedCommentsMap={};this.selectableComments=this.findSelectableComments();this.selectableCheckboxes=[];this.selectAllCheckBoxes=c('DOM').scry(this.controlledRegion,'.fbSelectAllCheckbox');this.approveButtons=c('DOM').scry(this.controlledRegion,'.fbApproveButton');this.removeButtons=c('DOM').scry(this.controlledRegion,'.fbRemoveButton');for(var k=0;k<this.selectableComments.length;k++){var l=this.selectableComments[k].id,m=!!this.selectedCommentsMap[l];this.setCommentSelection(this.selectableComments[k],m);var n=c('DOM').find(this.selectableComments[k],'.fbCommentCheckbox');c('Event').listen(n,'click',this.toggleCommentSelection.bind(this));c('Event').listen(this.selectableComments[k],'click',this.toggleCommentSelection.bind(this));n.checked=m;this.selectableCheckboxes.push(n);}for(var o=0;o<this.selectAllCheckBoxes.length;o++){this.selectAllCheckBoxes[o].checked=false;this.selectAllCheckBoxes[o].disabled=this.selectableComments.length===0;c('Event').listen(this.selectAllCheckBoxes[o],'click',this.toggleSelectAllCheckbox.bind(this,this.selectAllCheckBoxes[o]));}for(var p=0;p<this.approveButtons.length;p++)c('Event').listen(this.approveButtons[p],'click',this.setBulkPrivacy.bind(this,false));for(var q=0;q<this.removeButtons.length;q++)c('Event').listen(this.removeButtons[q],'click',this.setBulkPrivacy.bind(this,true));},findSelectableComments:function(){var j=c('DOM').scry(this.controlledRegion,'.fbTopLevelComment'),k=[];for(var l=0;l<j.length;l++)if(c('DOM').scry(j[l],'.fbCommentCheckbox').length===1&&c('DOM').scry(j[l],'.fbCommentOverlay').length===0)k.push(j[l]);return k;},toggleCommentSelection:function(event){var j={a:true},k=event.getTarget(),l=k.tagName.toLowerCase(),m=k.parentNode.tagName.toLowerCase();if(j[l]||j[m])return;var n=c('CSS').hasClass(k,'fbFeedbackPost')?k:c('DOM').find(k,'^.fbFeedbackPost'),o=this.commentIsSelected(n),p=!o;this.setCommentSelection(n,p);this.synchronizeModeratorQueueUI();if(c('CSS').hasClass(k,'fbCommentCheckbox'))c('Event').stop(event);},commentIsSelected:function(j){return c('CSS').hasClass(j,'fbCommentSelected');},setCommentSelection:function(j,k){if(k){this.selectComment(j);}else this.deselectComment(j);},selectComment:function(j){c('CSS').addClass(j,'fbCommentSelected');this.selectedCommentsMap[j.id]=true;c('DOM').find(j,'.fbCommentCheckbox').checked=true;},deselectComment:function(j){c('CSS').removeClass(j,'fbCommentSelected');delete this.selectedCommentsMap[j.id];c('DOM').find(j,'.fbCommentCheckbox').checked=false;},toggleSelectAllCheckbox:function(j,event){c('Event').stop(event);var k=j.checked;for(var l=0;l<this.selectableComments.length;l++){this.setCommentSelection(this.selectableComments[l],j.checked);this.selectableCheckboxes[l].checked=k;}this.synchronizeBulkModerationCheckboxes(k);this.synchronizeBulkModerationButtons(k);},synchronizeModeratorQueueUI:function(){var j=0;for(var k=0;k<this.selectableCheckboxes.length;k++)if(this.selectableCheckboxes[k].checked)j++;var l=this.selectableCheckboxes.length>0&&j==this.selectableCheckboxes.length;this.synchronizeBulkModerationCheckboxes(l);this.synchronizeBulkModerationButtons(j>0);},synchronizeBulkModerationCheckboxes:function(j){for(var k=0;k<this.selectAllCheckBoxes.length;k++)this.selectAllCheckBoxes[k].checked=j;},synchronizeBulkModerationButtons:function(j){for(var k=0;k<this.approveButtons.length;k++)c('Button').setEnabled(this.approveButtons[k],j);for(var l=0;l<this.removeButtons.length;l++)c('Button').setEnabled(this.removeButtons[l],j);},setBulkPrivacy:function(j,event){c('Event').stop(event);this.synchronizeBulkModerationButtons(false);var k=[];for(var l in this.selectedCommentsMap)k.push(l);var m={is_private:j,in_moderation_queue:true,comment_ids:k,uniqids:k,controller_id:this.controllerID,locale:this.locale,owns_pages:this.userOwnsPages,in_aggregated_view:this.inAggregatedView,in_contextual_dialog:this.inContextualDialog};new (c('AsyncRequest'))().setURI('/ajax/connect/comments/set_bulk_private.php').setData(m).send();return false;},toggleBlackListAndSync:function(j,event){c('Event').stop(event);var k=this.commentInfoMap[j].actor,l={blacklist:!this.blacklistedActors[k],in_moderation_queue:this.inModerationQueue,comment_id:j,other_comment_ids:this.getOtherCommentsByActor(k,j),uniqid:j,controller_id:this.controllerID,locale:this.locale,owns_pages:this.userOwnsPages,in_aggregated_view:this.inAggregatedView,in_contextual_dialog:this.inContextualDialog};new (c('AsyncRequest'))().setURI('/ajax/connect/comments/set_blacklist.php').setData(l).setHandler((function(m){this.blacklistedActors[k]=!this.blacklistedActors[k];if(this.blacklistedActors[k]){this.recentlyBlacklistedActors[k]=true;}else delete this.recentlyBlacklistedActors[k];}).bind(this)).send();return false;},getOtherCommentsByActor:function(j,k){return this.actorToCommentInfoMap[j].filter(function(l){return l!=k;});},fetchMoreComments:function(j,k,event){c('Event').kill(event);c('CSS').addClass(k,'async_saving');if(this.fetchMoreCommentsIsPending[j.pager_id]===true)return;this.fetchMoreCommentsIsPending[j.pager_id]=true;var l={is_reply_thread:false,in_moderation_queue:false,view_as_moderator:false};Object.assign(l,j);var m=c('DOM').scry(c('$')(l.controller_id),this.getCommentsSelector(l));m=m.concat(c('DOM').scry(c('$')(l.controller_id),this.getCollapsedCommentsSelector(l)));var n=0,o=0;for(var p=0;p<m.length;p++)if(!c('CSS').hasClass(m[p],'fbCommentIgnored'))if(c('CSS').hasClass(m[p],'fbCommentHidden')){o++;}else n++;if(l.is_reply_thread)l.offset=n;l.hidden_offset=o;if(!l.aggregate_view)delete l.aggregate_view;if(!l.comment_id)delete l.comment_id;if(!l.is_reply_thread)l.comment_ids=this.commentIDs;if(!l.commentas){var q=i.allControllers[l.controller_id];l.commentas=q.realTimePollingParams.commentas;}new (c('AsyncRequest'))().setURI('/ajax/connect/feedback.php').setReadOnly(true).setData(l).setHandler((function(r){this.fetchMoreCommentsIsPending[j.pager_id]=false;}).bind(this)).send();},getCommentsSelector:function(j){var k=j.is_reply_thread?'li.fbCommentReply':'li.fbTopLevelComment';if(j.controller_id!=j.uniqid)k='div[id="'+j.uniqid+'"] '+k;return k;},getCollapsedCommentsSelector:function(j){var k=j.is_reply_thread?'div.fbCommentReply':'div.fbTopLevelComment';if(j.controller_id!=j.uniqid)k='div[id="'+j.uniqid+'"] '+k;return k;},getRecentlyBlacklistedActors:function(){var j=[];for(var k in this.recentlyBlacklistedActors)j.push(k);return j;},appendComments:function(j,k){var l=c('ge')(j);if(!l)return;var m=c('DOM').scry(l,'.fbFeedbackReplies')[0];if(!m)return;c('DOM').appendContent(m,k);},prependComments:function(j,k){var l=c('DOM').scry(document.documentElement,j)[0];if(!l)return;var m=k.getNodes(),n=[];for(var o=m.length;o-->0;){var p={id:c('DOM').getID(m[o]),element:m[o]};n.push(p);var q=c('ge')(p.id);if(q){c('CSS').hide(p.element);this.duplicateComments.push(p.element);for(var r=0;r<n.length;++r)c('DOM').insertAfter(q,n[r].element);n=[];}}for(o=0;o<n.length;++o)c('DOM').prependContent(l,n[o].element);setTimeout(this.removeDuplicateComments.bind(this),0);},removeDuplicateComments:function(){for(var j=0;j<this.duplicateComments.length;++j)c('DOM').remove(this.duplicateComments[j]);this.duplicateComments=[];},pollForComments:function(j){var k={locale:this.locale};Object.assign(k,j);if(!k.is_reply_thread)k.comment_ids=this.commentIDs;k.newest_comment_timestamp=this.newestCommentTimestamp;var l=this.handlePollResponse.bind(this),m=this.handlePollError.bind(this),n=this.handlePollFinally.bind(this);new (c('AsyncRequest'))().setURI('/plugins/comments/poll').setReadOnly(true).setData(k).setMethod('GET').setHandler(l).setErrorHandler(m).setFinallyHandler(n).send();},handlePollResponse:function(j){},handlePollError:function(j){},handlePollFinally:function(j){}});f.exports=window.CommentAdminPanelController||i;},null);
__d('WindowComm',['URI'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={_callbacks:{},makeHandler:function(i,j,k){j=j||'opener';if(!k)k='f'+(Math.random()*(1<<30)).toString(16).replace('.','');h._callbacks[k]=i;return new (c('URI'))('/connect/window_comm.php').setQueryData({_id:k,_relation:j}).getQualifiedURI().toString();},_recv:function(i){var j=new (c('URI'))(i).getQueryData();h._callbacks[j._id](j);}};f.exports=h;b.WindowComm=h;},null);
__d('OpenIDRequest',['errorCode','AsyncRequest','AsyncSignal','URI','UserAgent_DEPRECATED','PHPQuerySerializer','coalesce','createArrayFromMixed'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(){var j=new (c('AsyncRequest'))().setReadOnly(true).setHandler(this.asyncResponseHandler.bind(this)).setErrorHandler(this.asyncErrorHandler.bind(this));Object.assign(this,{openidUrl:null,requestId:i.maxRequestId++,successResponseHandler:null,cancelHandler:null,intermediateHandler:null,immediateMode:false,useExtensions:true,thirdPartyLogin:false,popupWindow:null,asyncRequest:j,retryCount:0});i.requests[this.requestId]=this;}i.getRequestById=function(j){return i.requests[j];};i.prototype.setOpenIDUrl=function(j){this.openidUrl=j;return this;};i.prototype.setSuccessHandler=function(j){this.successResponseHandler=j;return this;};i.prototype.setErrorHandler=function(j){this.errorHandler=j;return this;};i.prototype.setCancelHandler=function(j){this.cancelHandler=j;return this;};i.prototype.setImmediateMode=function(j){this.immediateMode=j;return this;};i.prototype.setUseExtensions=function(j){this.useExtensions=j;return this;};i.prototype.setIntermediateHandler=function(j){this.intermediateHandler=j;return this;};i.prototype.setThirdPartyLogin=function(j){this.thirdPartyLogin=j;return this;};i.prototype.send=function(){if(!this.openidUrl)throw "openidUrl is a required parameter. Call setOpenIDUrl()";var j=this.calculateRedirectUrl();if(!j){this.logMetrics('redirectUrlNotFound');return;}if(this.immediateMode){this.createHiddenIframe(j);}else{if(this.popupWindow)throw "OpenID popup is already in progress";this.showPopup(j);}this.logMetrics('requestSent');};i.prototype.calculateRedirectUrl=function(j){var k=this.immediateMode?'checkid_immediate':'checkid_setup',l={'openid.mode':k},m;if(!i.cache[this.openidUrl])return null;m=i.cache[this.openidUrl].url;var n=new (c('URI'))(new (c('URI'))(m).getQueryData()['openid.return_to']);n.addQueryData({context:i.context,request_id:this.requestId});l['openid.return_to']=n.toString();l.third_party_login=this.thirdPartyLogin;return new (c('URI'))(m).addQueryData(l).getQualifiedURI();};i.prototype.createHiddenIframe=function(j){var k='openid_request_'+this.requestId,l=document.body.appendChild(document.createElement('div')),m=function(){l.innerHTML='<iframe name="'+k+'"'+' src="'+j.toString()+'"'+' scrolling="no" '+' frameborder="0" class="hidden_elem"></iframe>';};if(c('UserAgent_DEPRECATED').ie()){l.innerHTML='<iframe src="javascript:false"></iframe>';setTimeout(m,0);}else m();};i.prototype.showPopup=function(j){var k;if(i.cache[this.openidUrl])k=i.cache[this.openidUrl].popup_dimensions;if(!k||!k.height||!k.width)k={height:'580',width:'790'};var l={x:c('coalesce')(window.screenX,window.screenLeft),y:c('coalesce')(window.screenY,window.screenTop),width:c('coalesce')(window.outerWidth,document.body.clientWidth),height:c('coalesce')(window.outerHeight,document.body.clientHeight)},m=l.x+(l.width-k.width)/2,n=l.y+(l.height-k.height)/2,o=["location=yes","scrollbars=1","left="+m,"top="+n,"resizable=yes","height="+k.height,"width="+k.width].join(",");this.popupWindow=window.open(j.toString(),'_blank',o);this.popupPollInterval=setInterval(this.pollPopupWindow.bind(this),100);this.popupWindow.focus();};i.prototype.pollPopupWindow=function(){if(!(this.popupPollInterval&&this.popupWindow))return;if(this.popupWindow.closed){clearInterval(this.popupPollInterval);this.cancel();}};i.prototype.closePopupIfOpen=function(){if(this.popupWindow){if(this.popupPollInterval)clearInterval(this.popupPollInterval);this.popupWindow.close();}this.popupWindow=null;};i.prototype.cancel=function(){this.closePopupIfOpen();if(this.cancelHandler)this.cancelHandler();this.logMetrics('requestCanceled');};i.prototype.logMetrics=function(j){new (c('AsyncSignal'))('/ajax/openid/metrics.php',{metric:j,immediate:this.immediateMode,context:i.context,openid_url:this.openidUrl}).send();};i.prototype.triggerCompleteAuthAsync=function(j){if(j.charAt(0)=='?'||j.charAt(0)=='&')j=j.substr(1);var k=c('PHPQuerySerializer').deserialize(j);this.closePopupIfOpen();if(k['openid.mode']=='cancel'){this.cancel();return;}if(this.intermediateHandler)this.intermediateHandler();this.asyncRequest.setData({openid_params:k}).send();};i.prototype.asyncResponseHandler=function(j){var k=j.getPayload();if(this.successResponseHandler)this.successResponseHandler(k);this.closePopupIfOpen();};i.prototype.cleanHandleResponse=function(j){if(j.css)j.css=c('createArrayFromMixed')(j.css);this.asyncRequest.handleResponse(j);};i.prototype.asyncErrorHandler=function(j){this.closePopupIfOpen();if(j.error==1428010||j.error==1428011){this.cancel();return;}if(this.errorHandler)this.errorHandler(j);};i.prototype.retry=function(){++this.retryCount;this.requestId=i.maxRequestId++;this.send();};i.prototype.setProviderCache=function(j){i.cache=j;return this;};i.cache={};i.requests=[];i.maxRequestId=0;i.context='default';f.exports=i;},null);
__d('WidgetArbiter',['createArrayFromMixed'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={_findSiblings:function(){if(h._siblings)return;h._siblings=[];for(var i=parent.frames.length-1;i>=0;i--)try{if(parent.frames[i]&&parent.frames[i].Arbiter&&parent.frames[i].Arbiter.inform)h._siblings.push(parent.frames[i].Arbiter);}catch(j){}},inform:function(){h._findSiblings();var i=c('createArrayFromMixed')(arguments);h._siblings.forEach(function(j){j.inform.apply(j,i);});}};f.exports=h;},null);
__d('MentionResultsPropTypes',['React','SearchableEntry','SelectionState'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i={viewID:h.string.isRequired,selection:h.instanceOf(c('SelectionState')).isRequired,contextComponent:h.object.isRequired,mentionableEntries:h.array.isRequired,highlightedMentionable:h.instanceOf(c('SearchableEntry')),onMentionSelect:h.func.isRequired,onMentionHighlight:h.func.isRequired,onMentionRenderHighlight:h.func.isRequired};f.exports=i;},null);
__d('MentionsLayer.react',['Bootloader','Locale','MentionResultsPropTypes','React','areEqual'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=false,j=c('Locale').isRTL(),k,l,m,n,o=5,p=c('React').createClass({displayName:'MentionsLayer',propTypes:babelHelpers._extends({},c('MentionResultsPropTypes'),{typeaheadView:h.func.isRequired,typeaheadViewProps:h.object,autoflip:h.bool,position:h.oneOf(['above','below'])}),getInitialState:function(){return {bootloaded:i};},componentWillMount:function(){if(!this.state.bootloaded)q((function(){this.isMounted()&&this.setState({bootloaded:true});}).bind(this));},_onMentionSelect:function(r,s){s.preventDefault();this.props.onMentionSelect(r,s);},shouldComponentUpdate:function(r,s){return (this.state.bootloaded!==s.bootloaded||!c('areEqual')(this.props.mentionableEntries,r.mentionableEntries)||this.props.highlightedMentionable!==r.highlightedMentionable||this.props.characterOffset!==r.characterOffset);},render:function(){if(!this.state.bootloaded)return null;var r=this.props.mentionableEntries,s=this.props.selection,t=s.isCollapsed()&&s.getHasFocus()&&r&&r.length,u=null,v=this.props.typeaheadViewProps,w=false,x=false;if(v&&v.positionAtContext){w=true;x=true;}else if(t)u=n(this.props.characterOffset,j);var y={};if(this.props.autoflip){y.ContextualLayerAutoFlip=l;y.ContextualLayerUpdateOnScroll=m;}var z=this.props.typeaheadView;return (c('React').createElement(k,{shown:t,context:this.props.contextComponent,contextBounds:u,containerWidthMatchContext:x,offsetY:o,position:this.props.position||'below',behaviors:y},c('React').createElement(z,{id:this.props.viewID,viewProps:this.props.typeaheadViewProps,highlightedEntry:this.props.highlightedMentionable,entries:r||[],onSelect:this._onMentionSelect,onHighlight:this.props.onMentionHighlight,onRenderHighlight:this.props.onMentionRenderHighlight})));}});function q(r){c('Bootloader').loadModules(["ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","getMentionableRect"],function(s,t,u,v){k=s;l=t;m=u;n=v;i=true;r();});}f.exports=p;},null);
__d('ActorBio.react',['fbt','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ActorBio',propTypes:{stats:i.object.isRequired,preferredTypes:i.array.isRequired},renderLink:function(k){return 'url' in k?c('React').createElement('a',babelHelpers._extends({},this.props,{href:k.url}),k.name):c('React').createElement('span',null,k.name);},renderItem:function(k,l){var m;switch(k){case 'employer':if('position' in l){m=h._("{employer} {position}",[h.param('position',this.renderLink(l.position)),h.param('employer',this.renderLink(l))]);}else m=h._("\u52e4\u52d9\u5148: {employer}",[h.param('employer',this.renderLink(l))]);break;case 'mutual_friend':m=h._("{user}\u3055\u3093\u306e\u53cb\u9054",[h.param('user',this.renderLink(l))]);break;default:return this.renderLink(l);}return c('React').createElement('span',null,m);},render:function(){var k=this.props.stats,l=this.props.preferredTypes;for(var m=0;m<l.length;m++)for(var n=0;n<l[m].length;n++){var o=l[m][n];if(o in k)return this.renderItem(o,k[o]);}return c('React').createElement('span',null);}});f.exports=j;},null);
__d("fillArray",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=new Array(i);for(var l=0;l<i;l++)k[l]=j;return k;}f.exports=h;},null);
__d('CompositeDraftDecorator',['immutable','fillArray'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('immutable').List,i='.';function j(m){this.$CompositeDraftDecorator1=m.slice();}j.prototype.getDecorations=function(m){var n=c('fillArray')(m.getText().length,null);this.$CompositeDraftDecorator1.forEach(function(o,p){var q=0,r=o.getStrategy();r(m,function(s,t){if(k(n,s,t)){l(n,s,t,p+i+q);q++;}});});return h(n);};j.prototype.getComponentForKey=function(m){var n=parseInt(m.split(i)[0],10);return this.$CompositeDraftDecorator1[n].getComponent();};j.prototype.getPropsForKey=function(m){var n=parseInt(m.split(i)[0],10);return this.$CompositeDraftDecorator1[n].getProps();};function k(m,n,o){for(var p=n;p<o;p++)if(m[p]!=null)return false;return true;}function l(m,n,o,p){for(var q=n;q<o;q++)m[q]=p;}f.exports=j;},null);
__d('DraftDecorator',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){this.$DraftDecorator1=i;this.$DraftDecorator2=j;this.$DraftDecorator3=k||{};}h.prototype.getStrategy=function(){return this.$DraftDecorator1;};h.prototype.getComponent=function(){return this.$DraftDecorator2;};h.prototype.getProps=function(){return this.$DraftDecorator3;};f.exports=h;},null);
__d('EmoticonSpan.react',['cx','DraftEntity','React','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'EmoticonSpan',render:function(){var j=c('DraftEntity').get(this.props.entityKey),k=j.getData(),l=k.type,m=c('joinClasses')("_1ty6",'emoticon_'+l);return (c('React').createElement('span',{className:m,title:l,'data-offset-key':this.props.offsetKey},c('React').createElement('span',{className:"_5ukz"},this.props.children)));}});f.exports=i;},null);
__d('HashtagSpan.react',['cx','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'HashtagSpan',render:function(){return (c('React').createElement('span',babelHelpers._extends({},this.props,{'data-offset-key':this.props.offsetKey,className:"_5u8n",spellCheck:false}),this.props.children));}});f.exports=i;},null);
__d('MentionSpan.react',['cx','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'MentionSpan',render:function(){return (c('React').createElement('span',babelHelpers._extends({},this.props,{'data-offset-key':this.props.offsetKey,className:"_5u8u",spellCheck:false}),this.props.children));}});f.exports=i;},null);
__d('WeakMentionSpan.react',['cx','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'WeakMentionSpan',render:function(){return (c('React').createElement('span',{'data-offset-key':this.props.offsetKey,className:"_whq",spellCheck:false},this.props.children));}});f.exports=i;},null);
__d('getEntityMatcher',['DraftEntity'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('DraftEntity').get;function i(j,k){var l=k||h;return function(m,n){m.findEntityRanges(function(o){var p=o.getEntity();return typeof p==='string'&&j(l(p));},n);};}f.exports=i;},null);
__d('getHashtagMatches',['getHashtagRegex'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('getHashtagRegex')();function i(j,k){var l=j.getText(),m,n,o,p;while((m=h.exec(l))!==null){n=m.index+m[1].length;o=m[2];p=m[3];k(n,n+o.length+p.length);}}f.exports=i;},null);
__d('getMentionsInputDecorator',['CompositeDraftDecorator','DraftDecorator','EmoticonSpan.react','HashtagSpan.react','MentionSpan.react','WeakMentionSpan.react','getEntityMatcher','getHashtagMatches'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h;function i(){if(!h)h=new (c('CompositeDraftDecorator'))([new (c('DraftDecorator'))(c('getEntityMatcher')(function(j){var k=j.getData();return j.getType()==='MENTION'&&k&&k.isWeak;}),c('WeakMentionSpan.react')),new (c('DraftDecorator'))(c('getEntityMatcher')(function(j){return j.getType()==='MENTION';}),c('MentionSpan.react')),new (c('DraftDecorator'))(c('getEntityMatcher')(function(j){return j.getType()==='EMOTICON';}),c('EmoticonSpan.react')),new (c('DraftDecorator'))(c('getHashtagMatches'),c('HashtagSpan.react'))]);return h;}f.exports=i;},null);
__d('AbstractTextEditorPlaceholder.react',['cx','EditorState','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'AbstractTextEditorPlaceholder',propTypes:{editorState:i.instanceOf(c('EditorState')).isRequired,text:i.string.isRequired},shouldComponentUpdate:function(k){if(this.props.text!==k.text)return true;var l=this.props.editorState,m=k.editorState,n=l.getSelection(),o=m.getSelection();return (n.getHasFocus()!==o.getHasFocus());},render:function(){var k=this.props.editorState.getSelection().getHasFocus(),l="_5ywb"+(k?' '+"_5ywc":'');return (c('React').createElement('div',{className:l},c('React').createElement('div',{className:"_3br6"},this.props.text)));}});f.exports=j;},null);
__d('KeyBindingUtil',['UserAgent'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UserAgent').isPlatform('Mac OS X'),i={isCtrlKeyCommand:function(j){return !!j.ctrlKey&&!j.altKey;},hasCommandModifier:function(j){return h?!!j.metaKey&&!j.altKey:i.isCtrlKeyCommand(j);}};f.exports=i;},null);
__d('getDefaultKeyBinding',['KeyBindingUtil','Keys','UserAgent'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UserAgent').isPlatform('Mac OS X'),i=c('UserAgent').isPlatform('Windows'),j=h&&c('UserAgent').isBrowser('Firefox < 29'),k=c('KeyBindingUtil').hasCommandModifier,l=c('KeyBindingUtil').isCtrlKeyCommand;function m(r){return h&&r.altKey||l(r);}function n(r){if(k(r))return r.shiftKey?'redo':'undo';}function o(r){if(i&&r.shiftKey)return null;return m(r)?'delete-word':'delete';}function p(r){if(k(r)&&h)return 'backspace-to-start-of-line';return m(r)?'backspace-word':'backspace';}function q(r){switch(r.keyCode){case 66:return k(r)?'bold':null;case 68:return l(r)?'delete':null;case 72:return l(r)?'backspace':null;case 73:return k(r)?'italic':null;case 74:return k(r)?'code':null;case 75:return !i&&l(r)?'secondary-cut':null;case 79:return l(r)?'insert-block-delimiter':null;case 84:return h&&l(r)?'transpose-characters':null;case 85:return k(r)?'underline':null;case 87:return h&&l(r)?'backspace-word':null;case 89:if(l(r))return i?'redo':'secondary-paste';return null;case 90:return n(r)||null;case c('Keys').DELETE:return o(r);case c('Keys').BACKSPACE:return p(r);case c('Keys').LEFT:return (j&&k(r)?'move-selection-to-start-of-block':null);case c('Keys').RIGHT:return (j&&k(r)?'move-selection-to-end-of-block':null);default:return null;}}f.exports=q;},null);
__d('AbstractTextEditorProps',['EditorState','React','emptyFunction','getDefaultKeyBinding'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('emptyFunction').thatReturns(''),j=c('emptyFunction').thatReturns(null),k={propTypes:{editorState:h.instanceOf(c('EditorState')).isRequired,placeholder:h.string,textAlignment:h.oneOf(['left','center','right']),blockRendererFn:h.func,blockStyleFn:h.func,inlineStyleFn:h.func,keyBindingFn:h.func,readOnly:h.bool,spellCheck:h.bool,stripPastedStyles:h.bool,handleReturn:h.func,handleKeyCommand:h.func,handleBeforeInput:h.func,handlePastedFiles:h.func,onEscape:h.func,onTab:h.func,onUpArrow:h.func,onDownArrow:h.func,onPasteRawText:h.func,onBlur:h.func,onFocus:h.func},getDefaultProps:function(){return {blockRendererFn:j,blockStyleFn:i,inlineStyleFn:i,keyBindingFn:c('getDefaultKeyBinding'),readOnly:false,spellCheck:false,stripPastedStyles:false};}};f.exports=k;},null);
__d('ContentStateInlineStyle',['CharacterMetadata','immutable'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={add:function(j,k,l){return i(j,k,l,true);},remove:function(j,k,l){return i(j,k,l,false);}};function i(j,k,l,m){var n=j.getBlockMap(),o=k.getStartKey(),p=k.getStartOffset(),q=k.getEndKey(),r=k.getEndOffset(),s=n.skipUntil(function(t,u){return u===o;}).takeUntil(function(t,u){return u===q;}).concat(c('immutable').Map([[q,n.get(q)]])).map(function(t,u){var v,w;if(o===q){v=p;w=r;}else{v=u===o?p:0;w=u===q?r:t.getLength();}var x=t.getCharacterList(),y;while(v<w){y=x.get(v);x=x.set(v,m?c('CharacterMetadata').applyStyle(y,l):c('CharacterMetadata').removeStyle(y,l));v++;}return t.set('characterList',x);});return j.merge({blockMap:n.merge(s),selectionBefore:k,selectionAfter:k});}f.exports=h;},null);
__d('applyEntityToContentBlock',['CharacterMetadata'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l){var m=i.getCharacterList();while(j<k){m=m.set(j,c('CharacterMetadata').applyEntity(m.get(j),l));j++;}return i.set('characterList',m);}f.exports=h;},null);
__d('applyEntityToContentState',['immutable','applyEntityToContentBlock'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=i.getBlockMap(),m=j.getStartKey(),n=j.getStartOffset(),o=j.getEndKey(),p=j.getEndOffset(),q=l.skipUntil(function(r,s){return s===m;}).takeUntil(function(r,s){return s===o;}).merge(c('immutable').OrderedMap([[o,l.get(o)]])).map(function(r,s){var t,u;if(m===o){t=n;u=p;}else{t=s===m?n:0;u=s===o?0:r.getLength();}return c('applyEntityToContentBlock')(r,t,u,k);});return i.merge({blockMap:l.merge(q),selectionBefore:j,selectionAfter:j});}f.exports=h;},null);
__d('DraftEntitySegments',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getRemovalRange:function(i,j,k,l,m){var n=k.split(' ');n=n.map(function(x,y){if(m==='forward'){if(y>0)return ' '+x;}else if(y<n.length-1)return x+' ';return x;});var o=l,p,q,r=null,s=null;for(var t=0;t<n.length;t++){q=n[t];p=o+q.length;if(i<p&&o<j){if(r!==null){s=p;}else{r=o;s=p;}}else if(r!==null)break;o=p;}var u=l+k.length,v=r===l,w=s===u;if(!v&&w||v&&!w)if(m==='forward'){if(s!==u)s++;}else if(r!==l)r--;return {start:r,end:s};}};f.exports=h;},null);
__d('checkRangeOverlap',['invariant'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k,l,m){!(j<=k&&l<=m)?h(0):undefined;return j<m&&k>l;}f.exports=i;},null);
__d('getRangesForDraftEntity',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){var l=[];j.findEntityRanges(function(m){return m.getEntity()===k;},function(m,n){l.push({start:m,end:n});});!!!l.length?h(0):undefined;return l;}f.exports=i;},null);
__d('getCharacterRemovalRange',['invariant','DraftEntity','DraftEntitySegments','checkRangeOverlap','getRangesForDraftEntity'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k,l){var m=k.getStartOffset(),n=k.getEndOffset(),o=j.getEntityAt(m);if(!o)return k;var p=c('DraftEntity').get(o),q=p.getMutability();if(q==='MUTABLE')return k;var r=c('getRangesForDraftEntity')(j,o).filter(function(u){return c('checkRangeOverlap')(m,n,u.start,u.end);});!(r.length==1)?h(0):undefined;var s=r[0];if(q==='IMMUTABLE')return k.merge({anchorOffset:s.start,focusOffset:s.end,isBackward:false});var t=c('DraftEntitySegments').getRemovalRange(m,n,j.getText().slice(s.start,s.end),s.start,l);return k.merge({anchorOffset:t.start,focusOffset:t.end,isBackward:false});}f.exports=i;},null);
__d('removeEntitiesAtEdges',['invariant','CharacterMetadata','DraftEntity','findRangesImmutable'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(l,m){var n=l.getBlockMap(),o={},p=m.getStartKey(),q=m.getStartOffset(),r=n.get(p),s=k(r,q);if(s!==r)o[p]=s;var t=m.getEndKey(),u=m.getEndOffset(),v=n.get(t);if(p===t)v=s;var w=k(v,u);if(w!==v)o[t]=w;if(!Object.keys(o).length)return l.set('selectionAfter',m);return l.merge({blockMap:n.merge(o),selectionAfter:m});}function j(l,m,n){var o;c('findRangesImmutable')(l,function(p,q){return p.getEntity()===q.getEntity();},function(p){return p.getEntity()===m;},function(p,q){if(p<=n&&q>=n)o={start:p,end:q};});!(typeof o==='object')?h(0):undefined;return o;}function k(l,m){var n=l.getCharacterList(),o=m>0?n.get(m-1):undefined,p=m<n.count()?n.get(m):undefined,q=o?o.getEntity():undefined,r=p?p.getEntity():undefined;if(r&&r===q){var s=c('DraftEntity').get(r);if(s.getMutability()!=='MUTABLE'){var t=j(n,r,m),u=t.start,v=t.end,w;while(u<v){w=n.get(u);n=n.set(u,c('CharacterMetadata').applyEntity(w,null));u++;}return l.set('characterList',n);}}return l;}f.exports=i;},null);
__d('getContentStateFragment',['generateBlockKey','removeEntitiesAtEdges'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=j.getStartKey(),l=j.getStartOffset(),m=j.getEndKey(),n=j.getEndOffset(),o=c('removeEntitiesAtEdges')(i,j),p=o.getBlockMap(),q=p.keySeq(),r=q.indexOf(k),s=q.indexOf(m)+1;return p.slice(r,s).map(function(t,u){var v=c('generateBlockKey')(),w=t.getText(),x=t.getCharacterList();if(k===m)return t.merge({key:v,text:w.slice(l,n),characterList:x.slice(l,n)});if(u===k)return t.merge({key:v,text:w.slice(l),characterList:x.slice(l)});if(u===m)return t.merge({key:v,text:w.slice(0,n),characterList:x.slice(0,n)});return t.set('key',v);});}f.exports=h;},null);
__d('insertIntoList',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){if(k===i.count()){j.forEach(function(l){i=i.push(l);});}else if(k===0){j.reverse().forEach(function(l){i=i.unshift(l);});}else i=i.slice(0,k).concat(j,i.slice(k));return i;}f.exports=h;},null);
__d('insertFragmentIntoContentState',['invariant','BlockMapBuilder','generateBlockKey','insertIntoList'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k,l){!k.isCollapsed()?h(0):undefined;var m=k.getStartKey(),n=k.getStartOffset(),o=j.getBlockMap(),p=l.size,q,r;if(p===1){var s=o.get(m),t=l.first(),u=s.getText(),v=s.getCharacterList(),w=s.merge({text:u.slice(0,n)+t.getText()+u.slice(n),characterList:c('insertIntoList')(v,t.getCharacterList(),n)});o=o.set(m,w);q=m;r=n+t.getText().length;return j.merge({blockMap:o.set(m,w),selectionBefore:k,selectionAfter:k.merge({anchorKey:q,anchorOffset:r,focusKey:q,focusOffset:r,isBackward:false})});}var x=[];j.getBlockMap().forEach(function(y,z){if(z!==m){x.push(y);return;}var aa=y.getText(),ba=y.getCharacterList(),ca=aa.length,da=aa.slice(0,n),ea=ba.slice(0,n),fa=l.first(),ga=y.merge({text:da+fa.getText(),characterList:ea.concat(fa.getCharacterList())});x.push(ga);l.slice(1,p-1).forEach(function(la){x.push(la.set('key',c('generateBlockKey')()));});var ha=aa.slice(n,ca),ia=ba.slice(n,ca),ja=l.last();q=c('generateBlockKey')();var ka=ja.merge({key:q,text:ja.getText()+ha,characterList:ja.getCharacterList().concat(ia)});x.push(ka);});r=l.last().getLength();return j.merge({blockMap:c('BlockMapBuilder').createFromArray(x),selectionBefore:k,selectionAfter:k.merge({anchorKey:q,anchorOffset:r,focusKey:q,focusOffset:r,isBackward:false})});}f.exports=i;},null);
__d('insertTextIntoContentState',['invariant','immutable','insertIntoList'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('immutable').Repeat;function j(k,l,m,n){!l.isCollapsed()?h(0):undefined;var o=m.length;if(!o)return k;var p=k.getBlockMap(),q=l.getStartKey(),r=l.getStartOffset(),s=p.get(q),t=s.getText(),u=s.merge({text:t.slice(0,r)+m+t.slice(r,s.getLength()),characterList:c('insertIntoList')(s.getCharacterList(),i(n,o),r)}),v=r+o;return k.merge({blockMap:p.set(q,u),selectionAfter:l.merge({anchorOffset:v,focusOffset:v})});}f.exports=j;},null);
__d('removeRangeFromContentState',['immutable'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j,k){if(k.isCollapsed())return j;var l=j.getBlockMap(),m=k.getStartKey(),n=k.getStartOffset(),o=k.getEndKey(),p=k.getEndOffset(),q=l.get(m),r=l.get(o),s;if(q===r){s=i(q.getCharacterList(),n,p);}else s=q.getCharacterList().slice(0,n).concat(r.getCharacterList().slice(p));var t=q.merge({text:q.getText().slice(0,n)+r.getText().slice(p),characterList:s}),u=l.toSeq().skipUntil(function(v,w){return w===m;}).takeUntil(function(v,w){return w===o;}).concat(c('immutable').Map([[o,null]])).map(function(v,w){return w===m?t:null;});l=l.merge(u).filter(function(v){return !!v;});return j.merge({blockMap:l,selectionBefore:k,selectionAfter:k.merge({anchorKey:m,anchorOffset:n,focusKey:m,focusOffset:n,isBackward:false})});}function i(j,k,l){if(k===0){while(k<l){j=j.shift();k++;}}else if(l===j.count()){while(l>k){j=j.pop();l--;}}else j=j.slice(0,k).concat(j.slice(l));return j;}f.exports=h;},null);
__d('setBlockTypeForContentState',['immutable'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=j.getStartKey(),m=j.getEndKey(),n=i.getBlockMap(),o=n.toSeq().skipUntil(function(p,q){return q===l;}).takeUntil(function(p,q){return q===m;}).concat(c('immutable').Map([[m,n.get(m)]])).map(function(p){return p.merge({type:k,depth:0});});return i.merge({blockMap:n.merge(o),selectionBefore:j,selectionAfter:j});}f.exports=h;},null);
__d('splitBlockInContentState',['invariant','generateBlockKey'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){!k.isCollapsed()?h(0):undefined;var l=k.getAnchorKey(),m=k.getAnchorOffset(),n=j.getBlockMap(),o=n.get(l),p=o.getText(),q=o.getCharacterList(),r=o.merge({text:p.slice(0,m),characterList:q.slice(0,m)}),s=c('generateBlockKey')(),t=r.merge({key:s,text:p.slice(m),characterList:q.slice(m)}),u=n.toSeq().takeUntil(function(x){return x===o;}),v=n.toSeq().skipUntil(function(x){return x===o;}).rest(),w=u.concat([[r.getKey(),r],[t.getKey(),t]],v).toOrderedMap();return j.merge({blockMap:w,selectionBefore:k,selectionAfter:k.merge({anchorKey:s,anchorOffset:0,focusKey:s,focusOffset:0,isBackward:false})});}f.exports=i;},null);
__d('DraftModifier',['invariant','CharacterMetadata','ComposedInlineStyle','ContentStateInlineStyle','applyEntityToContentState','getCharacterRemovalRange','getContentStateFragment','insertFragmentIntoContentState','insertTextIntoContentState','removeEntitiesAtEdges','removeRangeFromContentState','setBlockTypeForContentState','splitBlockInContentState'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('ComposedInlineStyle').NONE,j={replaceText:function(k,l,m,n,o){var p=c('removeEntitiesAtEdges')(k,l),q=c('removeRangeFromContentState')(p,l),r=c('CharacterMetadata').create({style:n||i,entity:o||null});return c('insertTextIntoContentState')(q,q.getSelectionAfter(),m,r);},insertText:function(k,l,m,n,o){!l.isCollapsed()?h(0):undefined;return j.replaceText(k,l,m,n,o);},moveText:function(k,l,m){var n=c('getContentStateFragment')(k,l),o=j.removeRange(k,l,'backward');return j.replaceWithFragment(o,m,n);},replaceWithFragment:function(k,l,m){var n=c('removeEntitiesAtEdges')(k,l),o=c('removeRangeFromContentState')(n,l);return c('insertFragmentIntoContentState')(o,o.getSelectionAfter(),m);},removeRange:function(k,l,m){if(l.getAnchorKey()===l.getFocusKey()){var n=l.getAnchorKey(),o=l.getStartOffset(),p=l.getEndOffset(),q=k.getBlockForKey(n),r=q.getEntityAt(o),s=q.getEntityAt(p-1);if(r&&r===s){var t=c('getCharacterRemovalRange')(q,l,m);return c('removeRangeFromContentState')(k,t);}}var u=c('removeEntitiesAtEdges')(k,l);return c('removeRangeFromContentState')(u,l);},splitBlock:function(k,l){var m=c('removeEntitiesAtEdges')(k,l),n=c('removeRangeFromContentState')(m,l);return c('splitBlockInContentState')(n,n.getSelectionAfter());},applyInlineStyle:function(k,l,m){return c('ContentStateInlineStyle').add(k,l,m);},removeInlineStyle:function(k,l,m){return c('ContentStateInlineStyle').remove(k,l,m);},setBlockType:function(k,l,m){return c('setBlockTypeForContentState')(k,l,m);},applyEntity:function(k,l,m){var n=c('removeEntitiesAtEdges')(k,l);return c('applyEntityToContentState')(n,l,m);}};f.exports=j;},null);
__d('isSelectionAtLeafStart',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getSelection(),k=j.getAnchorKey(),l=i.getBlockTree(k),m=j.getStartOffset(),n=false;l.some(function(o){if(m===o.get('start')){n=true;return true;}if(m<o.get('end'))return o.get('leaves').some(function(p){var q=p.get('start');if(m===q){n=true;return true;}if(m<q)return false;});});return n;}f.exports=h;},null);
__d('TextEditorCompositionHandler',['ComposedInlineStyle','DraftModifier','EditorState','Keys','isSelectionAtLeafStart'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('ComposedInlineStyle').NONE,i=20,j={_stillComposing:false,_textInputData:'',onBeforeInput:function(k){this._textInputData=(this._textInputData||'')+k.data;},onCompositionStart:function(){this._stillComposing=true;},onCompositionEnd:function(){this._resolved=false;this._stillComposing=false;setTimeout((function(){if(!this._resolved)j.resolveComposition.call(this);}).bind(this),i);},onKeyDown:function(k){if(k.which===c('Keys').RIGHT||k.which===c('Keys').LEFT)k.preventDefault();},onKeyPress:function(k){if(k.which===c('Keys').RETURN)k.preventDefault();},resolveComposition:function(){if(this._stillComposing)return;this._resolved=true;var k=this._textInputData;this._textInputData='';var l=c('EditorState').set(this.props.editorState,{inCompositionMode:false}),m=!k||c('isSelectionAtLeafStart')(l);if(m)this.restoreEditorDOM();this.exitCurrentMode();this.removeRenderGuard();if(k){var n=c('DraftModifier').replaceText(l.getCurrentContent(),l.getSelection(),k,h,null);this.update(c('EditorState').push(l,n,'insert-characters'));return;}if(m)this.update(c('EditorState').set(l,{nativelyRenderedContent:null,forceSelection:true}));}};f.exports=j;},null);
__d('DraftOffsetKey',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='-',i={encode:function(j,k,l){return j+h+k+h+l;},decode:function(j){var k=j.split(h),l=k[0],m=k[1],n=k[2];return {blockKey:l,decoratorKey:parseInt(m,10),leafKey:parseInt(n,10)};}};f.exports=i;},null);
__d('ElementForBlockType',['cx','ComposedBlockType','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').createElement('ul',{className:"_5a_q"+(' '+"_5yj1")}),j=c('React').createElement('ol',{className:"_5a_q"+(' '+"_509r")}),k=c('React').createElement('pre',{className:"_19ik"}),l={getElement:function(m){switch(m){case c('ComposedBlockType').HEADER_ONE:return 'h2';case c('ComposedBlockType').HEADER_TWO:return 'h3';case c('ComposedBlockType').UNORDERED_LIST_ITEM:case c('ComposedBlockType').ORDERED_LIST_ITEM:return 'li';case c('ComposedBlockType').BLOCKQUOTE:return 'blockquote';case c('ComposedBlockType').MEDIA:return 'figure';default:return 'div';}},getWrapperTemplate:function(m){switch(m){case c('ComposedBlockType').UNORDERED_LIST_ITEM:return i;case c('ComposedBlockType').ORDERED_LIST_ITEM:return j;case c('ComposedBlockType').CODE:return k;default:return null;}}};f.exports=l;},null);
__d('TextEditorTextNode.react',['React','ReactDOM','UserAgent'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UserAgent').isBrowser('IE <= 11');function i(m){return h?m.textContent==='\n':m.tagName==='BR';}var j=h?c('React').createElement('span',{key:'A','data-text':'true'},'\n'):c('React').createElement('br',{key:'A','data-text':'true'}),k=h?c('React').createElement('span',{key:'B','data-text':'true'},'\n'):c('React').createElement('br',{key:'B','data-text':'true'}),l=c('React').createClass({displayName:'TextEditorTextNode',forceFlag:false,shouldComponentUpdate:function(m){var n=c('ReactDOM').findDOMNode(this),o=m.children==='';if(o)return !i(n);return n.textContent!==m.children;},componentWillUpdate:function(){this.forceFlag=!this.forceFlag;},render:function(){if(this.props.children==='')return this.forceFlag?j:k;return (c('React').createElement('span',{key:this.forceFlag?'A':'B','data-text':'true'},this.props.children));}});f.exports=l;},null);
__d('setDraftEditorSelection',['containsNode','getActiveElement'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(k,l,m,n,o){if(!c('containsNode')(document.documentElement,l))return;var p=b.getSelection(),q=k.getAnchorKey(),r=k.getAnchorOffset(),s=k.getFocusKey(),t=k.getFocusOffset(),u=k.getIsBackward();if(!p.extend&&u){var v=q,w=r;q=s;r=t;s=v;t=w;u=false;}var x=q===m&&n<=r&&o>=r,y=s===m&&n<=t&&o>=t;if(x&&y){p.removeAllRanges();j(p,l,r-n);i(p,l,t-n);return;}if(!u){if(x){p.removeAllRanges();j(p,l,r-n);}if(y)i(p,l,t-n);}else{if(y){p.removeAllRanges();j(p,l,t-n);}if(x){var z=p.focusNode,aa=p.focusOffset;p.removeAllRanges();j(p,l,r-n);i(p,z,aa);}}}function i(k,l,m){if(k.extend&&c('containsNode')(c('getActiveElement')(),l)){k.extend(l,m);}else{var n=k.getRangeAt(0);n.setEnd(l,m);k.addRange(n.cloneRange());}}function j(k,l,m){var n=document.createRange();n.setStart(l,m);k.addRange(n);}f.exports=h;},null);
__d('TextEditorLeaf.react',['DraftCharacters','React','ReactDOM','SelectionState','TextEditorTextNode.react','setDraftEditorSelection'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('DraftCharacters').SOFT_NEWLINE,j=3,k=c('React').createClass({displayName:'TextEditorLeaf',propTypes:{selection:h.instanceOf(c('SelectionState')),start:h.number.isRequired,blockKey:h.string.isRequired,text:h.string.isRequired,style:h.number,inlineStyleFn:h.func.isRequired,isLast:h.bool.isRequired},_setSelection:function(){var l=this.props.selection;if(l==null||!l.getHasFocus())return;var m=this.props.start,n=m+this.props.text.length,o=this.props.blockKey;if(!l.hasEdgeWithin(o,m,n))return;var p=c('ReactDOM').findDOMNode(this),q=p.firstChild,r;if(q.nodeType===j){r=q;}else if(q.tagName==='BR'){r=p;}else r=q.firstChild;c('setDraftEditorSelection')(l,r,o,m,n);},shouldComponentUpdate:function(l){return (c('ReactDOM').findDOMNode(this.refs.leaf).textContent!==l.text||l.forceSelection);},componentDidUpdate:function(){this._setSelection();},componentDidMount:function(){this._setSelection();},render:function(){var l=this.props.text;if(l.endsWith(i)&&this.props.isLast)l+=i;var m;if(this.props.style)m=this.props.inlineStyleFn(this.props.style);return (c('React').createElement('span',{'data-offset-key':this.props.offsetKey,className:m,ref:'leaf'},c('React').createElement(c('TextEditorTextNode.react'),null,l)));}});f.exports=k;},null);
__d('TextEditorBlock.react',['cx','ContentBlock','DraftOffsetKey','ElementForBlockType','React','ReactDOM','Scroll','SelectionState','Style','TextEditorLeaf.react','UnicodeBidi','UnicodeBidiDirection','getElementPosition','getScrollPosition','getViewportDimensions','joinClasses','nullthrows'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('UnicodeBidiDirection').LTR,k=c('UnicodeBidiDirection').RTL,l=10,m=c('React').createClass({displayName:'TextEditorBlock',propTypes:{block:i.instanceOf(c('ContentBlock')).isRequired,tree:i.object.isRequired,selection:i.instanceOf(c('SelectionState')).isRequired,decorator:i.object,forceSelection:i.bool.isRequired,direction:i.string.isRequired,blockProps:i.object,startIndent:i.bool,blockStyleFn:i.func.isRequired,inlineStyleFn:i.func.isRequired},shouldComponentUpdate:function(o){return (this.props.block!==o.block||this.props.tree!==o.tree||this.props.direction!==o.direction||n(o.selection,o.block.getKey())&&o.forceSelection);},componentDidMount:function(){var o=this.props.selection,p=o.getEndKey();if(!o.getHasFocus()||p!==this.props.block.getKey())return;var q=c('ReactDOM').findDOMNode(this),r=c('Style').getScrollParent(q),s=c('getScrollPosition')(r),t;if(r===window){var u=c('getElementPosition')(q),v=u.y+u.height,w=c('getViewportDimensions')().height;t=v-w;if(t>0)window.scrollTo(s.x,s.y+t+l);}else{var x=q.offsetHeight+q.offsetTop,y=r.offsetHeight+s.y;t=x-y;if(t>0)c('Scroll').setTop(r,c('Scroll').getTop(r)+t+l);}},_renderChildren:function(){var o=this.props.block,p=o.getKey(),q=o.getText(),r=this.props.tree.size-1,s=n(this.props.selection,p);return this.props.tree.map((function(t,u){var v=t.get('leaves'),w=v.size-1,x=v.map((function(ga,ha){var ia=c('DraftOffsetKey').encode(p,u,ha),ja=ga.get('start'),ka=ga.get('end');return (c('React').createElement(c('TextEditorLeaf.react'),{key:ia,offsetKey:ia,blockKey:p,start:ja,selection:s?this.props.selection:undefined,forceSelection:this.props.forceSelection,text:q.slice(ja,ka),style:o.getInlineStyleAt(ja),inlineStyleFn:this.props.inlineStyleFn,isLast:u===r&&ha===w}));}).bind(this)).toArray(),y=t.get('decoratorKey');if(y==null)return x;if(!this.props.decorator)return x;var z=c('nullthrows')(this.props.decorator),aa=z.getComponentForKey(y);if(!aa)return x;var ba=z.getPropsForKey(y),ca=c('DraftOffsetKey').encode(p,u,0),da=q.slice(v.first().get('start'),v.last().get('end')),ea=c('UnicodeBidi').getDirection(da),fa=ea!==this.props.direction?ea.toLowerCase():null;return (c('React').createElement(aa,babelHelpers._extends({},ba,{dir:fa,key:ca,entityKey:o.getEntityAt(t.get('start')),offsetKey:ca}),x));}).bind(this)).toArray();},render:function(){var o=this.props.block,p=o.getKey(),q=o.getDepth(),r=c('ElementForBlockType').getElement(o.getType()),s=c('joinClasses')(this.props.blockStyleFn(o.getType()),"_209g"+(this.props.direction===j?' '+"_2vxa":'')+(this.props.direction===k?' '+"_2vxb":''));if(r==='li'){var t=this.props.startIndent;s=c('joinClasses')(s,(t&&q===0?"_2yj9":'')+(t&&q===1?' '+"_2yja":'')+(t&&q===2?' '+"_2yjb":'')+(t&&q===3?' '+"_2yje":'')+(t&&q===4?' '+"_2yjf":'')+(q===0?' '+"_2yjg":'')+(q===1?' '+"_2yjh":'')+(q===2?' '+"_2yji":'')+(q===3?' '+"_2yjj":'')+(q===4?' '+"_2yjn":''));}var u=babelHelpers._extends({'data-block':true,'data-offset-key':c('DraftOffsetKey').encode(p,0,0),className:s},this.props.blockProps);return c('React').createElement(r,babelHelpers._extends({},u),this._renderChildren());}});function n(o,p){return (o.getAnchorKey()===p||o.getFocusKey()===p);}f.exports=m;},null);
__d('TextEditorContents.react',['DraftOffsetKey','EditorState','ElementForBlockType','React','TextEditorBlock.react','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'TextEditorContents',propTypes:{blockRendererFn:h.func.isRequired,blockStyleFn:h.func.isRequired,editorState:h.instanceOf(c('EditorState')).isRequired,inlineStyleFn:h.func.isRequired},shouldComponentUpdate:function(k){var l=this.props.editorState,m=k.editorState,n=l.getDirectionMap(),o=m.getDirectionMap();if(n!==o)return true;var p=l.getSelection().getHasFocus(),q=m.getSelection().getHasFocus();if(p!==q)return true;var r=m.getNativelyRenderedContent(),s=l.isInCompositionMode(),t=m.isInCompositionMode();if(l===m||r!==null&&m.getCurrentContent()===r||s&&t)return false;var u=l.getCurrentContent(),v=m.getCurrentContent(),w=l.getDecorator(),x=m.getDecorator();return (s!==t||u!==v||w!==x||m.mustForceSelection());},render:function(){var k=this.props.editorState,l=k.getCurrentContent(),m=k.getSelection(),n=k.mustForceSelection(),o=c('nullthrows')(k.getDirectionMap()),p=l.getBlocksAsArray(),q=[],r=null,s=null,t=null,u,v,w,x,y,z,aa;for(var ba=0;ba<p.length;ba++){w=p[ba];x=w.getKey();y=w.getType();var ca=this.props.blockRendererFn(w)||j,da=ca.component,ea=ca.props;u=da;z=c('React').createElement(u,{key:x,tree:k.getBlockTree(x),decorator:k.getDecorator(),block:w,selection:m,forceSelection:n,direction:o.get(x),blockProps:ea,startIndent:t===null||w.getDepth()>t,blockStyleFn:this.props.blockStyleFn,inlineStyleFn:this.props.inlineStyleFn});aa=c('ElementForBlockType').getWrapperTemplate(y);if(aa){if(s!==aa){v=[];r=c('React').cloneElement(aa,{key:x+'-wrap','data-offset-key':c('DraftOffsetKey').encode(x,0,0)},v);s=aa;q.push(r);}t=w.getDepth();c('nullthrows')(v).push(z);}else{v=null;r=null;s=null;t=null;q.push(z);}}return c('React').createElement('div',{'data-contents':'true'},q);}}),j={component:c('TextEditorBlock.react'),props:null};f.exports=i;},null);
__d('getEntityKeyForSelection',['DraftEntity'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j,k){var l;if(k.isCollapsed()){var m=k.getAnchorKey(),n=k.getAnchorOffset();if(n>0){l=j.getBlockForKey(m).getEntityAt(n-1);return i(l);}return null;}var o=k.getStartKey(),p=k.getStartOffset(),q=j.getBlockForKey(o);l=p===q.getLength()?null:q.getEntityAt(p);return i(l);}function i(j){if(j){var k=c('DraftEntity').get(j);return k.getMutability()==='MUTABLE'?j:null;}return null;}f.exports=h;},null);
__d('editOnBeforeInput',['BlockTree','DraftModifier','EditorState','UserAgent','getEntityKeyForSelection','isSelectionAtLeafStart','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='\'',i='\/',j=c('UserAgent').isBrowser('Firefox');function k(n){return (j&&(n==h||n==i));}function l(n,o,p,q){var r=c('DraftModifier').replaceText(n.getCurrentContent(),n.getSelection(),o,p,q);return c('EditorState').push(n,r,'insert-characters');}function m(n){var o=n.data;if(!o)return;if(this.props.handleBeforeInput&&this.props.handleBeforeInput(o)){n.preventDefault();return;}var p=this.props.editorState,q=p.getSelection();if(!q.isCollapsed()){n.preventDefault();this.update(l(p,o,p.getCurrentInlineStyle(),c('getEntityKeyForSelection')(p.getCurrentContent(),p.getSelection())));return;}var r=!c('isSelectionAtLeafStart')(p),s=l(p,o,p.getCurrentInlineStyle(),c('getEntityKeyForSelection')(p.getCurrentContent(),p.getSelection()));if(!r){n.preventDefault();this.update(s);return;}var t=q.getAnchorKey(),u=p.getBlockTree(t),v=c('BlockTree').getFingerprint(u),w=c('BlockTree').getFingerprint(s.getBlockTree(t));if(k(o)||v!==w||c('nullthrows')(s.getDirectionMap()).get(t)!==c('nullthrows')(p.getDirectionMap()).get(t)){n.preventDefault();}else s=c('EditorState').set(s,{nativelyRenderedContent:s.getCurrentContent()});this.update(s);}f.exports=m;},null);
__d('editOnBlur',['EditorState','UserAgent','getActiveElement'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UserAgent').isEngine('WebKit');function i(j){if(h&&c('getActiveElement')()===document.body)b.getSelection().removeAllRanges();var k=this.props.editorState,l=k.getSelection();if(!l.getHasFocus())return;var m=l.set('hasFocus',false);this.props.onBlur&&this.props.onBlur(j);this.update(c('EditorState').acceptSelection(k,m));}f.exports=i;},null);
__d('editOnCompositionStart',['EditorState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.setRenderGuard();this.setMode('composite');this.update(c('EditorState').set(this.props.editorState,{inCompositionMode:true}));}f.exports=h;},null);
__d('getFragmentFromSelection',['getContentStateFragment'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getSelection();if(!j.isCollapsed())return c('getContentStateFragment')(i.getCurrentContent(),j);}f.exports=h;},null);
__d('editOnCopy',['getFragmentFromSelection'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=this.props.editorState,k=j.getSelection();if(k.isCollapsed()){i.preventDefault();return;}this._clipboard=c('getFragmentFromSelection')(this.props.editorState);}f.exports=h;},null);
__d('editOnCut',['DraftModifier','EditorState','getFragmentFromSelection'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j){var k=this.props.editorState,l=k.getSelection();if(l.isCollapsed()){j.preventDefault();return;}var m=c('getFragmentFromSelection')(k);this._clipboard=m;this.setRenderGuard();this.setMode('cut');setTimeout((function(){this.restoreEditorDOM();this.removeRenderGuard();this.exitCurrentMode();this.update(i(k));}).bind(this),0);}function i(j){var k=c('DraftModifier').removeRange(j.getCurrentContent(),j.getSelection(),'forward');return c('EditorState').push(j,k,'remove-range');}f.exports=h;},null);
__d('editOnDragOver',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){this._internalDrag=false;this.setMode('drag');i.preventDefault();}f.exports=h;},null);
__d('editOnDragStart',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this._internalDrag=true;this.setMode('drag');}f.exports=h;},null);
__d('editOnFocus',['EditorState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=this.props.editorState,k=j.getSelection();if(k.getHasFocus())return;var l=k.set('hasFocus',true);this.props.onFocus&&this.props.onFocus(i);this.update(c('EditorState').forceSelection(j,l));}f.exports=h;},null);
__d('getSelectionOffsetKeyForNode',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){return i instanceof Element?i.getAttribute('data-offset-key'):null;}f.exports=h;},null);
__d('findAncestorOffsetKey',['getSelectionOffsetKeyForNode'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){while(i&&i!==document.documentElement){var j=c('getSelectionOffsetKeyForNode')(i);if(j!=null)return j;i=i.parentNode;}return null;}f.exports=h;},null);
__d('editOnInput',['DraftCharacters','DraftModifier','DraftOffsetKey','EditorState','UserAgent','findAncestorOffsetKey','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UserAgent').isEngine('Gecko'),i=c('DraftCharacters').SOFT_NEWLINE,j=i+i;function k(){var l=b.getSelection(),m=l.anchorNode,n=l.isCollapsed;if(m.nodeType!==Node.TEXT_NODE)return;var o=m.textContent,p=this.props.editorState,q=c('nullthrows')(c('findAncestorOffsetKey')(m)),r=c('DraftOffsetKey').decode(q),s=r.blockKey,t=r.decoratorKey,u=r.leafKey,v=p.getBlockTree(s).getIn([t,'leaves',u]),w=v.start,x=v.end,y=p.getCurrentContent(),z=y.getBlockForKey(s),aa=z.getText().slice(w,x);if(o.endsWith(j))o=o.slice(0,-1);if(o===aa)return;var ba=p.getSelection(),ca=ba.merge({anchorOffset:w,focusOffset:x,isBackward:false}),da=c('DraftModifier').replaceText(y,ca,o,z.getInlineStyleAt(w)),ea,fa,ga,ha;if(h){ea=l.anchorOffset;fa=l.focusOffset;ga=w+Math.min(ea,fa);ha=ga+Math.abs(ea-fa);ea=ga;fa=ha;}else{var ia=o.length-aa.length;ga=ba.getStartOffset();ha=ba.getEndOffset();ea=n?ha+ia:ga;fa=ha+ia;}var ja=da.merge({selectionBefore:y.getSelectionAfter(),selectionAfter:ba.merge({anchorOffset:ea,focusOffset:fa})});this.update(c('EditorState').push(p,ja,'spellcheck-change'));}f.exports=k;},null);
__d('SecondaryClipboard',['DraftModifier','EditorState','getContentStateFragment','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=null,i={cut:function(j){var k=j.getCurrentContent(),l=j.getSelection(),m=null;if(l.isCollapsed()){var n=l.getAnchorKey(),o=k.getBlockForKey(n).getLength();if(o===l.getAnchorOffset())return j;m=l.set('focusOffset',o);}else m=l;m=c('nullthrows')(m);h=c('getContentStateFragment')(k,m);var p=c('DraftModifier').removeRange(k,m,'forward');if(p===k)return j;return c('EditorState').push(j,p,'remove-range');},paste:function(j){if(!h)return j;var k=c('DraftModifier').replaceWithFragment(j.getCurrentContent(),j.getSelection(),h);return c('EditorState').push(j,k,'insert-fragment');}};f.exports=i;},null);
__d('getRangeClientRects',['invariant','UserAgent'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('UserAgent').isBrowser('Chrome');function j(l){var m=l.cloneRange(),n=[];for(var o=l.endContainer;o!=null;o=o.parentNode){var p=o===l.commonAncestorContainer;if(p){m.setStart(l.startContainer,l.startOffset);}else m.setStart(m.endContainer,0);var q=Array.from(m.getClientRects());n.push(q);if(p){var r;n.reverse();return (r=[]).concat.apply(r,n);}m.setEndBefore(o);}h(0);}var k=i?j:function(l){return Array.from(l.getClientRects());};f.exports=k;},null);
__d('expandRangeToStartOfLine',['invariant','UnicodeUtils','getRangeClientRects'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(m){var n=getComputedStyle(m),o=document.createElement('div');o.style.fontFamily=n.fontFamily;o.style.fontSize=n.fontSize;o.style.fontStyle=n.fontStyle;o.style.fontWeight=n.fontWeight;o.style.lineHeight=n.lineHeight;o.style.position='absolute';o.textContent='M';document.body.appendChild(o);var p=o.getBoundingClientRect();document.body.removeChild(o);return p.height;}function j(m,n){var o=Infinity,p=Infinity,q=-Infinity,r=-Infinity;for(var s=0;s<m.length;s++){var t=m[s];if(t.width===0||t.width===1)continue;o=Math.min(o,t.top);p=Math.min(p,t.bottom);q=Math.max(q,t.top);r=Math.max(r,t.bottom);}return (q<=p&&q-o<n&&r-p<n);}function k(m){switch(m.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return m.length;default:return m.childNodes.length;}}function l(m){!m.collapsed?h(0):undefined;m=m.cloneRange();var n=m.startContainer;if(n.nodeType!==1)n=n.parentNode;var o=i(n),p=m.endContainer,q=m.endOffset;m.setStart(m.startContainer,0);while(j(c('getRangeClientRects')(m),o)){p=m.startContainer;q=m.startOffset;!p.parentNode?h(0):undefined;m.setStartBefore(p);if(p.nodeType===1&&getComputedStyle(p).display!=='inline')break;}var r=p,s=q-1;do{var t=r.nodeValue;for(var u=s;u>=0;u--){if(t!=null&&u>0&&c('UnicodeUtils').isSurrogatePair(t,u-1))continue;m.setStart(r,u);if(j(c('getRangeClientRects')(m),o)){p=r;q=u;}else break;}if(u===-1||r.childNodes.length===0)break;r=r.childNodes[u];s=k(r);}while(true);m.setStart(p,q);return m;}f.exports=l;},null);
__d('getUpdatedSelectionState',['DraftOffsetKey','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l,m){var n=c('nullthrows')(i.getSelection()),o=c('DraftOffsetKey').decode(j),p=o.blockKey,q=i.getBlockTree(p).getIn([o.decoratorKey,'leaves',o.leafKey]),r=c('DraftOffsetKey').decode(l),s=r.blockKey,t=i.getBlockTree(s).getIn([r.decoratorKey,'leaves',r.leafKey]),u=q.get('start'),v=t.get('start'),w=q?u+k:null,x=t?v+m:null,y=n.getAnchorKey()===p&&n.getAnchorOffset()===w&&n.getFocusKey()===s&&n.getFocusOffset()===x;if(y)return n;var z=false;if(p===s){var aa=q.get('end'),ba=t.get('end');if(v===u&&ba===aa){z=m<k;}else z=v<u;}else{var ca=i.getCurrentContent().getBlockMap().keySeq().skipUntil(function(da){return da===p||da===s;}).first();z=ca===s;}return n.merge({anchorKey:p,anchorOffset:w,focusKey:s,focusOffset:x,isBackward:z});}f.exports=h;},null);
__d('getDraftEditorSelectionWithNodes',['invariant','DraftCharacters','findAncestorOffsetKey','getSelectionOffsetKeyForNode','getUpdatedSelectionState','nullthrows'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('DraftCharacters').SOFT_NEWLINE;function j(o,p,q,r,s,t){var u=q.nodeType===Node.TEXT_NODE,v=s.nodeType===Node.TEXT_NODE;if(u&&v)return {selectionState:c('getUpdatedSelectionState')(o,c('nullthrows')(c('findAncestorOffsetKey')(q)),r,c('nullthrows')(c('findAncestorOffsetKey')(s)),t),needsRecovery:false};var w=null,x=null,y=true;if(u){w={key:c('nullthrows')(c('findAncestorOffsetKey')(q)),offset:r};x=m(p,s,t);}else if(v){x={key:c('nullthrows')(c('findAncestorOffsetKey')(s)),offset:t};w=m(p,q,r);}else{w=m(p,q,r);x=m(p,s,t);if(q===s&&r===t)y=q.firstChild.nodeName!=='BR';}return {selectionState:c('getUpdatedSelectionState')(o,w.key,w.offset,x.key,x.offset),needsRecovery:y};}function k(o){while(o.firstChild&&c('getSelectionOffsetKeyForNode')(o.firstChild))o=o.firstChild;return o;}function l(o){while(o.lastChild&&c('getSelectionOffsetKeyForNode')(o.lastChild))o=o.lastChild;return o;}function m(o,p,q){var r=c('findAncestorOffsetKey')(p);!(r!=null||o&&(o===p||o.firstChild===p))?h(0):undefined;if(o===p){p=p.firstChild;!(p instanceof Element&&p.getAttribute('data-contents')==='true')?h(0):undefined;if(q>0)q=p.childNodes.length;}if(q===0){var s=null;if(r!=null){s=r;}else{var t=k(p);s=c('nullthrows')(c('getSelectionOffsetKeyForNode')(t));}return {key:s,offset:0};}var u=p.childNodes[q-1],v=null,w=null;if(!c('getSelectionOffsetKeyForNode')(u)){v=c('nullthrows')(r);w=n(u);}else{var x=l(u);v=c('nullthrows')(c('getSelectionOffsetKeyForNode')(x));w=n(x);}return {key:v,offset:w};}function n(o){var p=o.textContent;return p===i?0:p.length;}f.exports=j;},null);
__d('removeTextWithStrategy',['DraftModifier'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=i.getSelection(),m=i.getCurrentContent(),n=l;if(l.isCollapsed()){if(k==='forward'){if(i.isSelectionAtEndOfContent())return m;}else if(i.isSelectionAtStartOfContent())return m;n=j(i);if(n===l)return m;}return c('DraftModifier').removeRange(m,n,k);}f.exports=h;},null);
__d('keyCommandBackspaceToStartOfLine',['EditorState','expandRangeToStartOfLine','getDraftEditorSelectionWithNodes','removeTextWithStrategy'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('removeTextWithStrategy')(i,function(k){var l=b.getSelection(),m=l.getRangeAt(0);m=c('expandRangeToStartOfLine')(m);var n=c('getDraftEditorSelectionWithNodes')(k,null,m.endContainer,m.endOffset,m.startContainer,m.startOffset).selectionState;return n;},'backward');if(j===i.getCurrentContent())return i;return c('EditorState').push(i,j,'remove-range');}f.exports=h;},null);
__d('DraftRemovableWord',['TokenizeUtil'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('TokenizeUtil').getPunctuation(),i='[\'\u2018\u2019]',j='\\s|(?![_])'+h,k='^'+'(?:'+j+')*'+'(?:'+i+'|(?!'+j+').)*'+'(?:(?!'+j+').)',l=new RegExp(k),m='(?:(?!'+j+').)'+'(?:'+i+'|(?!'+j+').)*'+'(?:'+j+')*'+'$',n=new RegExp(m);function o(q,r){var s=r?n.exec(q):l.exec(q);return s?s[0]:q;}var p={getBackward:function(q){return o(q,true);},getForward:function(q){return o(q,false);}};f.exports=p;},null);
__d('moveSelectionBackward',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=i.getSelection(),l=i.getCurrentContent(),m=k.getStartKey(),n=k.getStartOffset(),o=m,p=0;if(j>n){var q=l.getKeyBefore(m);if(q==null){o=m;}else{o=q;var r=l.getBlockForKey(q);p=r.getText().length;}}else p=n-j;return k.merge({focusKey:o,focusOffset:p,isBackward:true});}f.exports=h;},null);
__d('keyCommandBackspaceWord',['DraftRemovableWord','EditorState','moveSelectionBackward','removeTextWithStrategy'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('removeTextWithStrategy')(i,function(k){var l=k.getSelection(),m=l.getStartOffset();if(m===0)return c('moveSelectionBackward')(k,1);var n=l.getStartKey(),o=k.getCurrentContent(),p=o.getBlockForKey(n).getText().slice(0,m),q=c('DraftRemovableWord').getBackward(p);return c('moveSelectionBackward')(k,q.length||1);},'backward');if(j===i.getCurrentContent())return i;return c('EditorState').push(i,j,'remove-range');}f.exports=h;},null);
__d('moveSelectionForward',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=i.getSelection(),l=k.getStartKey(),m=k.getStartOffset(),n=i.getCurrentContent(),o=l,p,q=n.getBlockForKey(l);if(j>q.getText().length-m){o=n.getKeyAfter(l);p=0;}else p=m+j;return k.merge({focusKey:o,focusOffset:p});}f.exports=h;},null);
__d('keyCommandDeleteWord',['DraftRemovableWord','EditorState','moveSelectionForward','removeTextWithStrategy'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('removeTextWithStrategy')(i,function(k){var l=k.getSelection(),m=l.getStartOffset(),n=l.getStartKey(),o=k.getCurrentContent(),p=o.getBlockForKey(n).getText().slice(m),q=c('DraftRemovableWord').getForward(p);return c('moveSelectionForward')(k,q.length||1);},'forward');if(j===i.getCurrentContent())return i;return c('EditorState').push(i,j,'remove-range');}f.exports=h;},null);
__d('keyCommandInsertNewline',['DraftModifier','EditorState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('DraftModifier').splitBlock(i.getCurrentContent(),i.getSelection());return c('EditorState').push(i,j,'split-block');}f.exports=h;},null);
__d('keyCommandPlainBackspace',['EditorState','UnicodeUtils','moveSelectionBackward','removeTextWithStrategy'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('removeTextWithStrategy')(i,function(l){var m=l.getSelection(),n=l.getCurrentContent(),o=m.getAnchorKey(),p=m.getAnchorOffset(),q=n.getBlockForKey(o).getText()[p-1];return c('moveSelectionBackward')(l,q?c('UnicodeUtils').getUTF16Length(q,0):1);},'backward');if(j===i.getCurrentContent())return i;var k=i.getSelection();return c('EditorState').push(i,j.set('selectionBefore',k),k.isCollapsed()?'backspace-character':'remove-range');}f.exports=h;},null);
__d('keyCommandPlainDelete',['EditorState','UnicodeUtils','moveSelectionForward','removeTextWithStrategy'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('removeTextWithStrategy')(i,function(l){var m=l.getSelection(),n=l.getCurrentContent(),o=m.getAnchorKey(),p=m.getAnchorOffset(),q=n.getBlockForKey(o).getText()[p];return c('moveSelectionForward')(l,q?c('UnicodeUtils').getUTF16Length(q,0):1);},'forward');if(j===i.getCurrentContent())return i;var k=i.getSelection();return c('EditorState').push(i,j.set('selectionBefore',k),k.isCollapsed()?'delete-character':'remove-range');}f.exports=h;},null);
__d('keyCommandMoveSelectionToEndOfBlock',['EditorState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getSelection(),k=j.getEndKey(),l=i.getCurrentContent(),m=l.getBlockForKey(k).getLength();return c('EditorState').set(i,{selection:j.merge({anchorKey:k,anchorOffset:m,focusKey:k,focusOffset:m,isBackward:false}),forceSelection:true});}f.exports=h;},null);
__d('keyCommandMoveSelectionToStartOfBlock',['EditorState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getSelection(),k=j.getStartKey();return c('EditorState').set(i,{selection:j.merge({anchorKey:k,anchorOffset:0,focusKey:k,focusOffset:0,isBackward:false}),forceSelection:true});}f.exports=h;},null);
__d('keyCommandTransposeCharacters',['DraftModifier','EditorState','getContentStateFragment'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getSelection();if(!j.isCollapsed())return i;var k=j.getAnchorOffset();if(k===0)return i;var l=j.getAnchorKey(),m=i.getCurrentContent(),n=m.getBlockForKey(l),o=n.getLength();if(o<=1)return i;var p,q;if(k===o){p=j.set('anchorOffset',k-1);q=j;}else{p=j.set('focusOffset',k+1);q=p.set('anchorOffset',k+1);}var r=c('getContentStateFragment')(m,p),s=c('DraftModifier').removeRange(m,p,'backward'),t=s.getSelectionAfter(),u=t.getAnchorOffset()-1,v=t.merge({anchorOffset:u,focusOffset:u}),w=c('DraftModifier').replaceWithFragment(s,v,r),x=c('EditorState').push(i,w,'insert-fragment');return c('EditorState').acceptSelection(x,q);}f.exports=h;},null);
__d('keyCommandUndo',['EditorState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=c('EditorState').undo(j);if(j.getLastChangeType()==='spellcheck-change'){var m=l.getCurrentContent();k(c('EditorState').set(l,{nativelyRenderedContent:m}));return;}i.preventDefault();if(!j.getNativelyRenderedContent()){k(l);return;}k(c('EditorState').set(j,{nativelyRenderedContent:null}));setTimeout(function(){k(l);},0);}f.exports=h;},null);
__d('editOnKeyDown',['EditorState','Keys','SecondaryClipboard','keyCommandBackspaceToStartOfLine','keyCommandBackspaceWord','keyCommandDeleteWord','keyCommandInsertNewline','keyCommandPlainBackspace','keyCommandPlainDelete','keyCommandMoveSelectionToEndOfBlock','keyCommandMoveSelectionToStartOfBlock','keyCommandTransposeCharacters','keyCommandUndo'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j,k){switch(j){case 'redo':return c('EditorState').redo(k);case 'delete':return c('keyCommandPlainDelete')(k);case 'delete-word':return c('keyCommandDeleteWord')(k);case 'backspace':return c('keyCommandPlainBackspace')(k);case 'backspace-word':return c('keyCommandBackspaceWord')(k);case 'backspace-to-start-of-line':return c('keyCommandBackspaceToStartOfLine')(k);case 'insert-block-delimiter':return c('keyCommandInsertNewline')(k);case 'transpose-characters':return c('keyCommandTransposeCharacters')(k);case 'move-selection-to-start-of-block':return c('keyCommandMoveSelectionToStartOfBlock')(k);case 'move-selection-to-end-of-block':return c('keyCommandMoveSelectionToEndOfBlock')(k);case 'secondary-cut':return c('SecondaryClipboard').cut(k);case 'secondary-paste':return c('SecondaryClipboard').paste(k);default:return k;}}function i(j){var k=j.which,l=this.props.editorState;switch(k){case c('Keys').RETURN:j.preventDefault();if(!this.props.handleReturn||!this.props.handleReturn(j))this.update(c('keyCommandInsertNewline')(l));return;case c('Keys').ESC:j.preventDefault();this.props.onEscape&&this.props.onEscape(j);return;case c('Keys').TAB:this.props.onTab&&this.props.onTab(j);return;case c('Keys').UP:this.props.onUpArrow&&this.props.onUpArrow(j);return;case c('Keys').DOWN:this.props.onDownArrow&&this.props.onDownArrow(j);return;}var m=this.props.keyBindingFn(j);if(!m)return;if(m==='undo'){c('keyCommandUndo')(j,l,this.update);return;}j.preventDefault();if(this.props.handleKeyCommand&&this.props.handleKeyCommand(m))return;var n=h(m,l);if(n!==l)this.update(n);}f.exports=i;},null);
__d('TextEditorPasteHandler',['invariant','CharacterMetadata','ComposedBlockType','ComposedInlineStyle','ContentBlock','DraftCharacters','DraftEntity','immutable','URI','arrayContains','fillArray','generateBlockKey','getSafeBodyFromHTML','nullthrows','sanitizeDraftText'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('ComposedBlockType').HEADER_ONE,j=c('ComposedBlockType').HEADER_TWO,k=c('ComposedBlockType').ORDERED_LIST_ITEM,l=c('ComposedBlockType').UNORDERED_LIST_ITEM,m=c('ComposedBlockType').BLOCKQUOTE,n=c('ComposedBlockType').UNSTYLED,o=c('ComposedInlineStyle').BOLD,p=c('ComposedInlineStyle').ITALIC,q=c('ComposedInlineStyle').UNDERLINE,r=c('ComposedInlineStyle').CODE,s=c('ComposedInlineStyle').STRIKETHROUGH,t=c('ComposedInlineStyle').NONE,u=c('DraftCharacters').BLOCK_DELIMITER,v=c('DraftCharacters').SOFT_NEWLINE,w=c('immutable').List,x=c('immutable').Repeat,y='&nbsp;',z=' ',aa=4,ba=new RegExp(u,'g'),ca=new RegExp(v,'g'),da=new RegExp(y,'g'),ea=['p','h1','h2','h3','li','blockquote','pre'],fa={b:o,code:r,del:s,em:p,i:p,s:s,strike:s,strong:o,u:q},ga;function ha(){return {text:'',inlines:[],entities:[],blocks:[]};}function ia(ta){var ua=new Array(1);if(ta)ua[0]=ta;return {text:z,inlines:[t],entities:ua,blocks:[]};}function ja(){return {text:v,inlines:[t],entities:new Array(1),blocks:[]};}function ka(ta,ua){return {text:u,inlines:[t],entities:new Array(1),blocks:[{type:ta,depth:Math.max(0,Math.min(aa,ua))}]};}function la(ta,ua){switch(ta){case 'h1':return i;case 'h2':return j;case 'li':if(ua==='ol')return k;return l;case 'blockquote':return m;case 'pre':return c('ComposedBlockType').CODE;default:return n;}}function ma(ta,ua,va){var wa=fa[ta];if(wa){va|=wa;}else if(ua.style){va|=ua.style.fontWeight==='bold'?o:0;va|=ua.style.fontStyle==='italic'?p:0;va|=ua.style.textDecoration==='underline'?q:0;va|=ua.style.textDecoration==='line-through'?s:0;}return va;}function na(ta,ua){if(ta.text.slice(-1)===u&&ua.text.slice(0,1)===u){ta.text=ta.text.slice(0,-1);ta.inlines.pop();ta.entities.pop();ta.blocks.pop();}if(ta.text.slice(-1)===u&&(ua.text===z||ua.text===v))return ta;return {text:ta.text+ua.text,inlines:ta.inlines.concat(ua.inlines),entities:ta.entities.concat(ua.entities),blocks:ta.blocks.concat(ua.blocks)};}function oa(ta){return ea.some(function(ua){return ta.indexOf('<'+ua)!==-1;});}function pa(ta){!(ta instanceof HTMLAnchorElement)?h(0):undefined;var ua=ta.protocol;return ua==='http:'||ua==='https:';}function qa(ta,ua,va,wa,xa,ya,za){var ab=ta.nodeName.toLowerCase(),bb=false,cb=n,db=ga;ga=ab;if(ab==='#text'){var eb=ta.textContent;if(eb.trim()===''&&wa!=='pre')return ia(za);if(wa!=='pre')eb=eb.replace(ca,z);return {text:eb,inlines:c('fillArray')(eb.length,ua),entities:c('fillArray')(eb.length,za),blocks:[]};}if(ab==='br'){if(db==='br'&&(!wa||la(wa,va)===n))return ka(n,ya);return ja();}var fb=ha(),gb=null;ua=ma(ab,ta,ua);if(ab==='ul'||ab==='ol'){if(va)ya+=1;va=ab;}if(!wa&&c('arrayContains')(xa,ab)){fb=ka(la(ab,va),ya);wa=ab;bb=true;}else if(va&&wa==='li'&&ab==='li'){fb=ka(la(ab,va),ya);wa=ab;bb=true;cb=va==='ul'?l:k;}var hb=ta.firstChild;if(hb!=null)ab=hb.nodeName.toLowerCase();var ib=null,jb=null;while(hb){if(ab==='a'&&hb.href&&pa(hb)){jb=new (c('URI'))(hb.href).toString();ib=c('DraftEntity').create('LINK','MUTABLE',{url:jb});}else ib=undefined;gb=qa(hb,ua,va,wa,xa,ya,ib||za);fb=na(fb,gb);var kb=hb.nextSibling;if(kb&&xa.indexOf(ab)>=0&&wa)fb=na(fb,ja());if(kb)ab=kb.nodeName.toLowerCase();hb=kb;}if(bb)fb=na(fb,ka(cb,ya));return fb;}function ra(ta){ta=ta.trim().replace(ba,'').replace(da,z);var ua=c('getSafeBodyFromHTML')(ta);if(!ua)return null;ga=null;var va=oa(ta)?ea:['div'],wa=qa(ua,t,'ul',null,va,-1);if(wa.text.indexOf(u)===0)wa={text:wa.text.slice(1),inlines:wa.inlines.slice(1),entities:wa.entities.slice(1),blocks:wa.blocks};if(wa.text.slice(-1)===u){wa.text=wa.text.slice(0,-1);wa.inlines=wa.inlines.slice(0,-1);wa.entities=wa.entities.slice(0,-1);wa.blocks.pop();}if(wa.blocks.length===0)wa.blocks.push({type:n,depth:0});if(wa.text.split(u).length===wa.blocks.length+1)wa.blocks.unshift({type:n,depth:0});return wa;}var sa={processHTML:function(ta){var ua=ra(ta);if(ua==null)return null;var va=0;return ua.text.split(u).map(function(wa,xa){wa=c('sanitizeDraftText')(wa);var ya=va+wa.length,za=c('nullthrows')(ua).inlines.slice(va,ya),ab=c('nullthrows')(ua).entities.slice(va,ya),bb=w(za.map(function(cb,db){var eb={style:cb,entity:null};if(ab[db])eb.entity=ab[db];return c('CharacterMetadata').create(eb);}));va=ya+1;return new (c('ContentBlock'))({key:c('generateBlockKey')(),type:c('nullthrows')(ua).blocks[xa].type,depth:c('nullthrows')(ua).blocks[xa].depth,text:wa,characterList:bb});});},processText:function(ta,ua){return ta.map(function(va){va=c('sanitizeDraftText')(va);return new (c('ContentBlock'))({key:c('generateBlockKey')(),type:n,text:va,characterList:w(x(ua,va.length))});});}};f.exports=sa;},null);
__d('getTextContentFromFiles',['DraftCharacters'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('DraftCharacters').BLOCK_DELIMITER,i=/\.textClipping$/,j={'text/plain':true,'text/html':true,'text/rtf':true},k=5000;function l(n,o){var p=0,q=[];n.forEach(function(r){m(r,function(s){p++;s&&q.push(s.slice(0,k));if(p==n.length)o(q.join(h));});});}function m(n,o){if(!b.FileReader||n.type&&!(n.type in j)){o('');return;}if(n.type===''){var p='';if(i.test(n.name))p=n.name.replace(i,'');o(p);return;}var q=new FileReader();q.onload=function(){o(q.result);};q.onerror=function(){o('');};q.readAsText(n);}f.exports=l;},null);
__d('editOnPaste',['BlockMapBuilder','CharacterMetadata','DataTransfer','DraftCharacters','DraftModifier','EditorState','TextEditorPasteHandler','getEntityKeyForSelection','getTextContentFromFiles','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('DraftCharacters').SOFT_NEWLINE;function i(l){l.preventDefault();var m=new (c('DataTransfer'))(l.clipboardData);if(!m.isRichText()){var n=m.getFiles(),o=m.getText();if(n.length>0){if(this.props.handlePastedFiles&&this.props.handlePastedFiles(n))return;c('getTextContentFromFiles')(n,(function(ba){ba=ba||o;if(!ba)return;var ca=this.props.editorState,da=ba.split(h),ea=c('CharacterMetadata').create({style:ca.getCurrentInlineStyle(),entity:c('getEntityKeyForSelection')(ca.getCurrentContent(),ca.getSelection())}),fa=c('TextEditorPasteHandler').processText(da,ea),ga=c('BlockMapBuilder').createFromArray(fa),ha=c('DraftModifier').replaceWithFragment(ca.getCurrentContent(),ca.getSelection(),ga);this.update(c('EditorState').push(ca,ha,'insert-fragment'));}).bind(this));return;}}var p=null,q=m.getText();this.props.onPasteRawText&&this.props.onPasteRawText(q);if(q)p=q.split(h);if(!this.props.stripPastedStyles){if(m.isRichText()&&this._clipboard){p=c('nullthrows')(p);var r=p.filter(j),s=this._clipboard.toSeq().map(function(ba){return ba.getText();}).filter(j).toArray(),t=r.every(function(ba,ca){return ba===s[ca];});if(t){this.update(k(this.props.editorState,this._clipboard));return;}}var u=m.getHTML();if(u){var v=c('TextEditorPasteHandler').processHTML(u);if(v){var w=c('BlockMapBuilder').createFromArray(v);this.update(k(this.props.editorState,w));return;}}this._clipboard=null;}if(p){var x=this.props.editorState,y=c('CharacterMetadata').create({style:x.getCurrentInlineStyle(),entity:c('getEntityKeyForSelection')(x.getCurrentContent(),x.getSelection())}),z=c('TextEditorPasteHandler').processText(p,y),aa=c('BlockMapBuilder').createFromArray(z);this.update(k(this.props.editorState,aa));}}function j(l){return l.length>0;}function k(l,m){var n=c('DraftModifier').replaceWithFragment(l.getCurrentContent(),l.getSelection(),m);return c('EditorState').push(l,n,'insert-fragment');}f.exports=i;},null);
__d('getDraftEditorSelection',['getDraftEditorSelectionWithNodes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=b.getSelection();if(k.rangeCount===0)return {selectionState:i.getSelection().set('hasFocus',false),needsRecovery:false};return c('getDraftEditorSelectionWithNodes')(i,j,k.anchorNode,k.anchorOffset,k.focusNode,k.focusOffset);}f.exports=h;},null);
__d('editOnSelect',['EditorState','ReactDOM','getDraftEditorSelection'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){if(this._blockSelectEvents)return;var i=this.props.editorState,j=c('getDraftEditorSelection')(i,c('ReactDOM').findDOMNode(this.refs.editorContainer).firstChild),k=j.selectionState;if(k!==i.getSelection()){if(j.needsRecovery){i=c('EditorState').forceSelection(i,k);}else i=c('EditorState').acceptSelection(i,k);this.update(i);}}f.exports=h;},null);
__d('TextEditorEditHandler',['editOnBeforeInput','editOnBlur','editOnCompositionStart','editOnCopy','editOnCut','editOnDragOver','editOnDragStart','editOnFocus','editOnInput','editOnKeyDown','editOnPaste','editOnSelect'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={onBeforeInput:c('editOnBeforeInput'),onBlur:c('editOnBlur'),onCompositionStart:c('editOnCompositionStart'),onCopy:c('editOnCopy'),onCut:c('editOnCut'),onDragOver:c('editOnDragOver'),onDragStart:c('editOnDragStart'),onFocus:c('editOnFocus'),onInput:c('editOnInput'),onKeyDown:c('editOnKeyDown'),onPaste:c('editOnPaste'),onSelect:c('editOnSelect')};f.exports=h;},null);
__d('TextEditorDragHandler',['DataTransfer','DraftModifier','EditorState','findAncestorOffsetKey','getTextContentFromFiles','getUpdatedSelectionState','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(event,l){var m=null,n=null;if(document.caretRangeFromPoint){var o=document.caretRangeFromPoint(event.x,event.y);m=o.startContainer;n=o.startOffset;}else if(event.rangeParent){m=event.rangeParent;n=event.rangeOffset;}else return null;m=c('nullthrows')(m);n=c('nullthrows')(n);var p=c('nullthrows')(c('findAncestorOffsetKey')(m));return c('getUpdatedSelectionState')(l,p,n,p,n);}var i={onDragEnd:function(){this.exitCurrentMode();},onDrop:function(l){var m=new (c('DataTransfer'))(l.nativeEvent.dataTransfer),n=this.props.editorState,o=h(l.nativeEvent,n);l.preventDefault();this.exitCurrentMode();if(o==null)return;var p=m.getFiles();if(p.length>0){if(this.props.handleDroppedFiles&&this.props.handleDroppedFiles(o,p))return;c('getTextContentFromFiles')(p,(function(q){q&&this.update(k(n,c('nullthrows')(o),q));}).bind(this));return;}if(this._internalDrag){this.update(j(n,o));return;}this.update(k(n,o,m.getText()));}};function j(l,m){var n=c('DraftModifier').moveText(l.getCurrentContent(),l.getSelection(),m);return c('EditorState').push(l,n,'insert-fragment');}function k(l,m,n){var o=c('DraftModifier').insertText(l.getCurrentContent(),m,n,l.getCurrentInlineStyle());return c('EditorState').push(l,o,'insert-fragment');}f.exports=i;},null);
__d('AbstractTextEditor.react',['cx','AbstractTextEditorPlaceholder.react','AbstractTextEditorProps','DOMVector','EditorState','React','ReactDOM','TextEditorCompositionHandler','TextEditorContents.react','TextEditorEditHandler','TextEditorDragHandler','UserAgent'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('UserAgent').isBrowser('IE'),j=!i;function k(n){return function(o){if(!this.props.readOnly){var p=this._handler&&this._handler[n];p&&p.call(this,o);}};}function l(n){switch(n){case 'edit':return c('TextEditorEditHandler');case 'composite':return c('TextEditorCompositionHandler');case 'drag':return c('TextEditorDragHandler');case 'cut':case 'render':return null;}}var m=c('React').createClass({displayName:'AbstractTextEditor',getDefaultProps:c('AbstractTextEditorProps').getDefaultProps,_blockSelectEvents:false,_clipboard:null,_guardAgainstRender:false,_handler:null,_onBeforeInput:k('onBeforeInput'),_onBlur:k('onBlur'),_onCharacterData:k('onCharacterData'),_onCompositionEnd:k('onCompositionEnd'),_onCompositionStart:k('onCompositionStart'),_onCopy:k('onCopy'),_onCut:k('onCut'),_onDragEnd:k('onDragEnd'),_onDragOver:k('onDragOver'),_onDragStart:k('onDragStart'),_onDrop:k('onDrop'),_onInput:k('onInput'),_onFocus:k('onFocus'),_onKeyDown:k('onKeyDown'),_onKeyPress:k('onKeyPress'),_onKeyUp:k('onKeyUp'),_onMouseDown:k('onMouseDown'),_onMouseUp:k('onMouseUp'),_onPaste:k('onPaste'),_onSelect:k('onSelect'),_disableIELinkDetection:function(){if(i)document.execCommand('AutoUrlDetect',false,false);},_renderPlaceholder:function(){var n=this.props.editorState.getCurrentContent(),o=this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!n.hasText();if(o)return (c('React').createElement(c('AbstractTextEditorPlaceholder.react'),{text:this.props.placeholder,editorState:this.props.editorState,textAlignment:this.props.textAlignment}));},getInitialState:function(){return {containerKey:0};},render:function(){var n=this.props.textAlignment,o="_5yw9"+(n==='left'?' '+"_48yc":'')+(n==='right'?' '+"_48yd":'')+(n==='center'?' '+"_48ye":''),p=this.props.editorState.getCurrentContent().hasText(),q=this.props.readOnly;return (c('React').createElement('div',{className:o},this._renderPlaceholder(),c('React').createElement('div',{className:"_5ywa",key:'editor'+this.state.containerKey,ref:'editorContainer'},c('React').createElement('div',{'aria-activedescendant':q?null:this.props.ariaActiveDescendantID,'aria-autocomplete':q?null:this.props.ariaAutoComplete,'aria-describedby':this.props.ariaDescribedBy,'aria-expanded':q?null:this.props.ariaExpanded,'aria-haspopup':q?null:this.props.ariaHasPopup,'aria-label':this.props.ariaLabel,'aria-owns':q?null:this.props.ariaOwneeID,className:"_54-z",contentEditable:!this.props.readOnly,'data-testid':this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:'editor',role:q?null:this.props.role||'textbox',spellCheck:j&&this.props.spellCheck,tabIndex:this.props.tabIndex,title:p?null:this.props.placeholder},c('React').createElement(c('TextEditorContents.react'),{blockRendererFn:this.props.blockRendererFn,blockStyleFn:this.props.blockStyleFn,editorState:this.props.editorState,inlineStyleFn:this.props.inlineStyleFn})))));},focus:function(){var n=this.props.editorState,o=n.getSelection().getHasFocus(),p=c('DOMVector').getScrollPosition();c('ReactDOM').findDOMNode(this.refs.editor).focus();window.scrollTo(p.x,p.y);if(o)return;this.update(c('EditorState').forceSelection(n,n.getSelection()));},blur:function(){c('ReactDOM').findDOMNode(this.refs.editor).blur();},componentDidMount:function(){this._clipboard=null;this._guardAgainstRender=false;this._handler=c('TextEditorEditHandler');this._disableIELinkDetection();},componentWillUpdate:function(){this._blockSelectEvents=true;},componentDidUpdate:function(){this._blockSelectEvents=false;},setMode:function(n){this._handler=l(n);},exitCurrentMode:function(){this.setMode('edit');},restoreEditorDOM:function(){this.setState({containerKey:this.state.containerKey+1},this.focus);},setRenderGuard:function(){this._guardAgainstRender=true;},removeRenderGuard:function(){this._guardAgainstRender=false;},update:function(n){this.props.onChange(n);}});f.exports=m;},null);
__d('AbstractMentionsTextEditor.react',['AbstractTextEditor.react','AbstractTextEditorProps','DraftModifier','EditorState','React','TypeaheadNavigation','clearImmediate','getOrCreateDOMID','setImmediate','uniqueID'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=5,j=c('React').createClass({displayName:'AbstractMentionsTextEditor',propTypes:babelHelpers._extends({},c('AbstractTextEditorProps').propTypes,{mentionsSource:h.object,mentionCreationFn:h.func.isRequired,mentionResultsComponent:h.func.isRequired,mentionResultsProps:h.object,excludedEntries:h.object,handleContentReturn:h.func,onAddMention:h.func,onShowMentions:h.func,autoHighlight:h.bool,maxResults:h.number}),getDefaultProps:function(){var l=c('AbstractTextEditor.react').getDefaultProps();return babelHelpers._extends({},l,{autoHighlight:true,maxResults:i});},componentWillMount:function(){this._viewID=c('uniqueID')();this._searchTimeouts=[];},componentWillUnmount:function(){this._searchTimeouts.forEach(function(l){return c('clearImmediate')(l);});this._searchTimeouts=null;},getInitialState:function(){return {highlightedMentionable:null,ariaActiveDescendantID:null,mentionableEntries:null,characterOffset:0};},_onShowMentions:function(l,m){if(!this.isMounted())return;var n=l&&l.length;if(!n){this.setState({highlightedMentionable:null,activeDescendantID:null,mentionableEntries:null,characterOffset:0});return;}var o=l.slice(0,this.props.maxResults),p=this.props.typeaheadViewProps;if(p&&p.mentionSortFn)o.sort(p.mentionSortFn);var q=null;if(this.props.autoHighlight||this.state.highlightedMentionable!==null)q=l[0];this.setState({highlightedMentionable:q,mentionableEntries:o,characterOffset:m});if(this.props.onShowMentions)this.props.onShowMentions(o,m);},_onBlur:function(l){this.setState(this.getInitialState());this.props.onBlur&&this.props.onBlur(l);},_onFocus:function(l){this.props.mentionsSource&&this.props.mentionsSource.bootstrap();this.props.onFocus&&this.props.onFocus(l);},_handleReturn:function(l){if(this.state.highlightedMentionable){this._onMentionSelect(this.state.highlightedMentionable,l);return true;}else if(this.props.handleContentReturn&&this.props.handleContentReturn(l))return true;return false;},_onTab:function(l){if(this.state.highlightedMentionable){l.preventDefault();this._onMentionSelect(this.state.highlightedMentionable,l);}else if(this.props.onTab)this.props.onTab(l);},_onEscape:function(l){if(this.props.onEscape)this.props.onEscape(l);if(this.state.mentionableEntries){l.stopPropagation();this.setState(this.getInitialState());}},_onUpArrow:function(l){if(this.state.mentionableEntries){l.preventDefault();c('TypeaheadNavigation').moveUp(this.state.mentionableEntries,this.state.highlightedMentionable,this._onMentionHighlight);}else this.props.onUpArrow&&this.props.onUpArrow(l);},_onDownArrow:function(l){if(this.state.mentionableEntries){l.preventDefault();c('TypeaheadNavigation').moveDown(this.state.mentionableEntries,this.state.highlightedMentionable,this._onMentionHighlight);}else this.props.onDownArrow&&this.props.onDownArrow(l);},_onMentionHighlight:function(l){this.setState({highlightedMentionable:l});},_onMentionRenderHighlight:function(l){var m=c('getOrCreateDOMID')(l);this.setState({ariaActiveDescendantID:m});},_onMentionSelect:function(l,m){var n=this.props.editorState,o=n.getSelection(),p=n.getCurrentContent(),q=o.getAnchorKey(),r=o.getAnchorOffset(),s=p.getBlockMap().get(q),t=r-k(s.getText().substr(0,r),l.getTitle(),this.state.characterOffset),u=c('DraftModifier').replaceText(p,o.set('anchorOffset',t),l.getTitle(),n.getCurrentInlineStyle(),this.props.mentionCreationFn(l)),v=c('EditorState').push(n,u,'insert-fragment');this.props.onChange(v);this.setState(this.getInitialState());if(this.props.onAddMention){var w=this.state.mentionableEntries.indexOf(l);this.props.onAddMention(l,w,m);}},shouldComponentUpdate:function(l,m){return (this.props.editorState!==l.editorState||this.props.placeholder!==l.placeholder||this.props.readOnly!==l.readOnly||this.state.mentionableEntries!==m.mentionableEntries||this.state.highlightedMentionable!==m.highlightedMentionable||this.state.ariaActiveDescendantID!==m.ariaActiveDescendantID);},componentDidUpdate:function(l){var m=this.props.editorState;if(m===l.editorState)return;var n=m.getSelection();if(n.getHasFocus()&&n.isCollapsed()){var o=m.getCurrentContent();if(this.props.mentionsSource)this._searchTimeouts.push(c('setImmediate')((function(){this.props.mentionsSource.search(o,n,this._onShowMentions);}).bind(this)));}},blur:function(){this.refs.abstractTextEditor.blur();},focus:function(){this.refs.abstractTextEditor.focus();},_renderMentionables:function(){var l=this.state.mentionableEntries;if(!l||!l.length)return null;var m=this.props.mentionResultsComponent;return (c('React').createElement(m,babelHelpers._extends({},this.props.mentionResultsProps,{viewID:this._viewID,selection:this.props.editorState.getSelection(),contextComponent:this,characterOffset:this.state.characterOffset,mentionableEntries:l||[],highlightedMentionable:this.state.highlightedMentionable,onMentionSelect:this._onMentionSelect,onMentionHighlight:this._onMentionHighlight,onMentionRenderHighlight:this._onMentionRenderHighlight})));},render:function(){var l=this.state.mentionableEntries,m=!!(l&&l.length),n=this.props.readOnly?null:'-2';return (c('React').createElement('div',{ref:'container',className:this.props.className,tabIndex:n},c('React').createElement(c('AbstractTextEditor.react'),babelHelpers._extends({},this.props,{ref:'abstractTextEditor',role:'combobox',ariaActiveDescendantID:this.state.ariaActiveDescendantID,ariaAutoComplete:'list',ariaOwneeID:this._viewID,ariaExpanded:m,ariaHasPopup:m,onBlur:this._onBlur,onFocus:this._onFocus,onTab:this._onTab,onEscape:this._onEscape,onDownArrow:this._onDownArrow,onUpArrow:this._onUpArrow,handleReturn:this._handleReturn})),this._renderMentionables()));}});function k(l,m,n){for(var o=n;o<=m.length;o++)if(l.substr(-o)==m.substr(0,o))n=o;return n;}f.exports=j;},null);
__d('createMentionEntity',['DraftEntity'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getType().toLowerCase();if(j==='hashtag')return c('DraftEntity').create('HASHTAG','IMMUTABLE');var k=j==='user'||j==='fb4c'?'SEGMENTED':'IMMUTABLE',l=i.getAuxiliaryData();return c('DraftEntity').create('MENTION',k,{id:i.getUniqueID(),isWeak:l&&l.renderType==='non_member',type:j});}f.exports=h;},null);
__d('MentionsInput.react',['cx','AbstractMentionsTextEditor.react','EditorState','MentionsLayer.react','React','createMentionEntity','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MentionsInput',propTypes:{editorState:i.instanceOf(c('EditorState')).isRequired,mentionsSource:i.object,typeaheadView:i.func.isRequired,typeaheadViewPropTypes:i.object,spellCheck:i.bool,placeholder:i.string,className:i.string,autoflip:i.bool,position:i.oneOf(['above','below']),handleContentReturn:i.func,handleDroppedFiles:i.func,handlePastedFiles:i.func,onAddMention:i.func,onShowMentions:i.func,onChange:i.func,onInputFocus:i.func,onInputBlur:i.func},blur:function(){this.refs.textEditor.blur();},focus:function(){clearTimeout(this._focusTimer);this._focusTimer=setTimeout((function(){this.refs.textEditor.focus();}).bind(this),0);},componentWillUnmount:function(){clearTimeout(this._focusTimer);},render:function(){var k=c('joinClasses')(this.props.className,"_5yk1");return (c('React').createElement('div',{className:k,onClick:this.focus,onFocus:this.focus},c('React').createElement(c('AbstractMentionsTextEditor.react'),babelHelpers._extends({},this.props,{mentionResultsComponent:c('MentionsLayer.react'),mentionResultsProps:{typeaheadView:this.props.typeaheadView,typeaheadViewProps:this.props.typeaheadViewProps,autoflip:this.props.autoflip,position:this.props.position},mentionCreationFn:c('createMentionEntity'),ref:'textEditor',className:"_5yk2",stripPastedStyles:true}))));}});f.exports=j;},null);
__d('DevxFluxDispatcher',['Dispatcher'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h,i;'use strict';h=babelHelpers.inherits(j,c('Dispatcher'));i=h&&h.prototype;j.prototype.handleServerAction=function(k){this.$DevxFluxDispatcher1('serverAction',k);};j.prototype.handleViewAction=function(k){this.$DevxFluxDispatcher1('viewAction',k);};j.prototype.$DevxFluxDispatcher1=function(k,l){this.dispatch(babelHelpers._extends({source:k},l));};function j(){h.apply(this,arguments);}f.exports=new j();},null);
__d('DevxProxyActions',['DevxFluxDispatcher'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){Object.keys(i.ActionHandler).forEach((function(j){this[j]=function(){for(var k=arguments.length,l=Array(k),m=0;m<k;m++)l[m]=arguments[m];c('DevxFluxDispatcher').handleViewAction({action:j,args:l});};}).bind(this));}f.exports=h;},null);
__d('splitTextIntoTextBlocks',['DraftCharacters'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=new RegExp(c('DraftCharacters').SOFT_NEWLINE,'ig');function i(j){return j.split(h);}f.exports=i;},null);
__d('createEditorStateWithEntities',['ContentState','EditorState','applyEntityToContentBlock','createPlainBlocksFromText','splitTextIntoTextBlocks'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.text,k=i.ranges,l=i.decorator,m=i.entityCreationFn,n=i.splitIntoBlocks,o=i.allowUndo,p,q;if(n===undefined)n=true;if(j){p=n?c('splitTextIntoTextBlocks')(j):[j];q=[];var r=0;p.forEach(function(u){q.push(r);r+=u.length+1;});}else p=[''];var s=c('createPlainBlocksFromText')(p);if(k&&k.length&&m)k.forEach(function(u){var v=m(u.entity);if(v===null)return;var w=u.offset,x,y;for(var z=0;z<q.length;z++){var aa=q[z],ba=q[z+1];if(ba===undefined||w>=aa&&w<ba){x=s[z];y=w-aa;break;}}s[z]=c('applyEntityToContentBlock')(x,y,y+u.length,v);});var t=c('EditorState').createWithContent(c('ContentState').createFromBlockArray(s),l);if(o===false)t=c('EditorState').set(t,{allowUndo:false});return t;}f.exports=h;},null);
__d('getVisibleValueForContentState',['DraftCharacters','DraftEntity','emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('DraftCharacters').SOFT_NEWLINE;function i(j){var k=j.getBlockMap().map(function(l){var m=l.getText(),n='';l.findEntityRanges(c('emptyFunction').thatReturnsTrue,function(o,p){var q=l.getEntityAt(o);if(q===null){n+=m.slice(o,p);}else{var r=c('DraftEntity').get(q);if(r.getType()==='EMOTICON'){n+=r.getData().originalEmoticon;}else n+=m.slice(o,p);}});return n;});return k.join(h);}f.exports=i;},null);
__d('DocumentMentionsRegex',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\\/!%\'"~=<>_:;',i='\\b[A-Z][^\\s'+h+']',j={PUNCTUATION:h,NAME:i};f.exports=j;},null);
__d('AtSignMentionsStrategy',['DocumentMentionsRegex'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('DocumentMentionsRegex').PUNCTUATION,i=['@','\\uff20'].join(''),j='[^'+i+h+'\\s]',k='(?:'+'\\.[ |$]|'+' |'+'['+h+']|'+')',l=new RegExp('(?:^|\\s|\\()('+'['+i+']'+'((?:'+j+k+'){0,20})'+')$'),m={name:'AtSignMentionsStrategy',findMentionableString:function(n){var o=l.exec(n);if(o!==null){var p=o[2];if(p.length)return {matchingString:p,leadOffset:o[1].length};}return null;}};f.exports=m;},null);
__d('CapitalizedNameMentionsStrategy',['DocumentMentionsRegex'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=1,i=new RegExp('(^|[^#])((?:'+c('DocumentMentionsRegex').NAME+'{'+h+',})$)'),j={name:'CapitalizedNameMentionsStrategy',findMentionableString:function(k){var l=i.exec(k);if(l!==null)return {matchingString:l[2],leadOffset:l[2].length};return null;}};f.exports=j;},null);
__d('DocumentCompositeMentionsSource',['invariant','emptyFunction','nullthrows'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(k,l){var m=k.getCharacterList().toSeq().slice(0,l).reverse().takeWhile(function(n){return n.getEntity()===null;}).count();return k.getText().slice(l-m,l);}function j(k){!(k.length>0)?h(0):undefined;this.$DocumentCompositeMentionsSource1=k;this.$DocumentCompositeMentionsSource2=false;this.$DocumentCompositeMentionsSource3=null;}j.prototype.bootstrap=function(k){if(this.$DocumentCompositeMentionsSource2)return;this.$DocumentCompositeMentionsSource2=true;k=k||c('emptyFunction');var l=this.$DocumentCompositeMentionsSource1.length;function m(){l--;if(!l)k&&k();}this.$DocumentCompositeMentionsSource1.forEach(function(n){n.bootstrap(m);});};j.prototype.search=function(k,l,m){var n=l.getAnchorKey(),o=k.getBlockForKey(n);this.$DocumentCompositeMentionsSource4(i(o,l.getAnchorOffset()),m);};j.prototype.$DocumentCompositeMentionsSource4=function(k,l){var m=this.$DocumentCompositeMentionsSource1.length,n,o;for(var p=0;p<m;p++){n=this.$DocumentCompositeMentionsSource1[p];o=n.findMatch(k);if(o===null){continue;}else{var q=c('nullthrows')(o).matchingString;this.$DocumentCompositeMentionsSource3=q;n.search(q,(function(r,s){if(this.$DocumentCompositeMentionsSource3===s)l(r,o.leadOffset);}).bind(this));return;}}this.$DocumentCompositeMentionsSource3=null;l(null,null);};f.exports=j;},null);
__d('DocumentMentionsSource',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){!(typeof j.findMentionableString==='function')?h(0):undefined;this.$DocumentMentionsSource1=j;this.$DocumentMentionsSource2=k;this.$DocumentMentionsSource3=false;}i.prototype.findMatch=function(j){return this.$DocumentMentionsSource1.findMentionableString(j);};i.prototype.bootstrap=function(j){if(!this.$DocumentMentionsSource3){this.$DocumentMentionsSource3=true;this.$DocumentMentionsSource2.bootstrap(j);}};i.prototype.search=function(j,k){this.$DocumentMentionsSource2.search(j,k,{strategyName:this.$DocumentMentionsSource1.name});};f.exports=i;},null);
__d('FilteredSearchSource',['AbstractSearchSource'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h,i;h=babelHelpers.inherits(j,c('AbstractSearchSource'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.$FilteredSearchSource1=k;this.$FilteredSearchSource2=l;}j.prototype.bootstrapImpl=function(k){'use strict';this.$FilteredSearchSource2.bootstrap(k);};j.prototype.searchImpl=function(k,l,m){'use strict';var n=(function(o,p){o=this.$FilteredSearchSource3(o,p);l(o,p);}).bind(this);this.$FilteredSearchSource2.search(k,n,m);};j.prototype.$FilteredSearchSource3=function(k,l){'use strict';var m=this.$FilteredSearchSource1;return k.filter(function(n){return m(n,l);});};f.exports=j;},null);
__d('filterCapitalizedNames',['TokenizeUtil'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(l,m){return i(l)&&(m.length>=5||j(l,m));}function i(l){var m=l.getAuxiliaryData()||k;return !m.disableAutosuggest&&!!(l.getType()==='user'||m.connectedPage);}function j(l,m){return c('TokenizeUtil').isExactMatch(m,l.getTitle());}var k={};f.exports=h;},null);
__d("XPluginCommentsBanAuthorAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/moderate\/ban\/{comment_id}\/",{comment_id:{type:"String",required:true}});},null);
__d("XPluginCommentsCreateCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/createComment\/{target_id}\/",{target_id:{type:"Int",required:true}});},null);
__d("XPluginCommentsCreateReplyAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/createReply\/{parent_comment_id}\/",{parent_comment_id:{type:"String",required:true}});},null);
__d("XPluginCommentsDeleteCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/delete\/",{});},null);
__d("XPluginCommentsEditCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/edit\/",{});},null);
__d("XPluginCommentsFlagCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/flag\/",{});},null);
__d("XPluginCommentsLikeCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/like\/",{action_like:{type:"Bool",defaultValue:false}});},null);
__d("XPluginCommentsHideCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/moderate\/hide\/{url_id}\/",{url_id:{type:"Int",required:true},action:{type:"Enum",required:true,enumType:1},type:{type:"Enum",required:true,enumType:1}});},null);
__d("XPluginCommentsPagerAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/{target_id}\/pager\/{ordering}\/",{target_id:{type:"Int",required:true},ordering:{type:"Enum",required:true,enumType:1}});},null);
__d("XPluginCommentsRepliesPagerAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/comment\/{comment_id}\/pager\/",{comment_id:{type:"String",required:true}});},null);
__d('CommentsPluginStore',['fbt','invariant','AsyncRequest','XPluginCommentsBanAuthorAsyncController','XPluginCommentsCreateCommentAsyncController','XPluginCommentsCreateReplyAsyncController','CommentsPluginConfig','XPluginCommentsDeleteCommentAsyncController','DeveloperCommentsModerationAction','DeveloperCommentsModerationSource','DeveloperCommentsModerationType','DevxFluxDispatcher','DTSG','XPluginCommentsEditCommentAsyncController','XPluginCommentsFlagCommentAsyncController','XPluginCommentsLikeCommentAsyncController','XPluginCommentsHideCommentAsyncController','MultiLoginPopup','PluginOptin','XPluginCommentsPagerAsyncController','XPluginCommentsRepliesPagerAsyncController','UnverifiedXD','WebStorage','getMentionsTextForContentState','getVisibleValueForContentState','mixInEventEmitter','nullthrows','uniqueID'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=10,k='__DEVX__',l={visibleValue:'',encodedValue:''},m={change:true,composerChange:true,composerCommentAdded:true,login:true,moreCommentsCompleted:true,moreRepliesCompleted:true,postError:true,sortingCompleted:true,sentryAction:true,previousComposerCommentPrefill:true,actorChange:true},n={maxLines:10,maxLength:1000},o=[],p={},q={userID:null,actors:{},actorsOptIn:{},appID:null,afterCursor:null,channelURL:null,composerSearchSource:{},deeplinkedCommentID:null,href:'',iframeReferer:null,isMobile:false,isModerator:false,mirroredPage:null,moderateURL:null,targetFBID:null,totalCount:0,user:{},minFeedLength:0,maxCommentLength:0,ret:null},r=false,s={},t={},u={},v={},w={ordering:null},x={},y={},z={setPostToFeed:true,sort:true,showMoreComments:true,showMoreReplies:true,toggleVisibility:true},aa={restorePreviousState:true,setUser:true,edit:true,showReplyComposer:true,cancelEdit:true,cancelReply:true},ba={addComment:true,addReply:true,saveEdit:true},ca={addComment:true};function da(na){!ma.hasOwnProperty(na)?i(0):undefined;}function ea(){!Array.isArray(o)?i(0):undefined;!(p instanceof Object)?i(0):undefined;}function fa(na,oa){if(!z[na]&&!la.isLoggedIn()){var pa=ca[na]?null:oa;c('MultiLoginPopup').login(null,null,h._("\u30b3\u30e1\u30f3\u30c8\u3059\u308b\u306b\u306f\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044"),{},ga.bind(null,pa));return;}oa.call();}function ga(na,oa){q.user.id=oa.user;q.user.uri=oa.profileUrl;q.user.thumbSrc=oa.profilePic;q.user.actorIDs=oa.actorIDs;if(oa.fbDtsg)c('DTSG').setToken(oa.fbDtsg);na&&na.call();la.emit('change');la.emit('login');}function ha(na){var oa,pa=la.getUser().id,qa=na.action,ra=(oa=ma[na.action]).bind.apply(oa,[ma].concat(na.args));if(la.isLoggedIn()&&(la.isPlatoformEnabled(pa)||aa[qa])||z[qa]){ra.call();}else{var sa=c('WebStorage').getSessionStorage();if(sa)sa.setItem('previousState',JSON.stringify(ia(na)));new (c('PluginOptin'))('comments').addReturnParams({numposts:Math.min(Math.max(1,q.totalCount),100),order_by:w.ordering}).start();}}function ia(na){var oa='',pa='',qa=[],ra={},sa={},ta=la.getCreateComposerContent();if(ta)oa=ta.encodedValue;if(!ba[na.action]){pa=na.action;qa=na.args;}Object.keys(x).forEach(function(ua){var va=la.getCreateComposerContent(ua);if(va.encodedValue)ra[ua]=va.encodedValue;});Object.keys(y).forEach(function(ua){var va=la.getEditComposerContent(ua);if(va.encodedValue)sa[ua]=va.encodedValue;});return {commentBody:oa,action:pa,commentIDs:qa,replies:ra,edits:sa};}function ja(na,oa,pa){return pa.indexOf(na)===oa;}function ka(na,oa){if(!q.channelURL)return;Object.assign(oa,{type:na,href:q.href});c('UnverifiedXD').send(oa,q.channelURL);}var la={LOGGED_OUT_USER:'0',getCommentIDs:function(){return o;},getByID:function(na){ea();return c('nullthrows')(p)[na];},isOptimisticComment:function(na){return na.id.startsWith(k);},getCurrentSorting:function(){return c('nullthrows')(w.ordering);},getTargetFBID:function(){return c('nullthrows')(q.targetFBID);},getCommentsCount:function(){ea();return q.totalCount;},getUser:function(){return q.user;},getIframeReferer:function(){return q.iframeReferer;},getAuthor:function(na){return this.getByID(this.getByID(na).authorID);},getPageSize:function(){return j;},getCommentBodyTruncationLimits:function(){return n;},getComposerSearchSource:function(){return q.composerSearchSource;},getMirroredPage:function(){return q.mirroredPage;},getMinFeedLength:function(){return q.minFeedLength+1;},getMaxCommentLength:function(){return q.maxCommentLength?q.maxCommentLength:Number.MAX_VALUE;},isMirrored:function(){return this.getMirroredPage()!=null;},isReply:function(na){var oa=this.getByID(na);return oa.targetID!==this.getTargetFBID();},isOptinReturn:function(){return !!q.ret;},setActor:function(na){q.user=q.actors[na];},getPostToFeed:function(){return r;},setPostToFeed:function(na){r=na;},getCreateComposerAttachment:function(na){return s[na||k]||null;},setCreateComposerAttachment:function(na,oa){s[oa||k]=na;this.emit('composerChange');},getEditComposerAttachment:function(na){return t[na]||null;},setEditComposerAttachment:function(na,oa){t[oa]=na;this.emit('composerChange');},getLoadingCreateComposerAttachment:function(na){return u[na||k]||false;},setLoadingCreateComposerAttachment:function(na,oa){u[oa||k]=na;this.emit('composerChange');},getLoadingEditComposerAttachment:function(na){return v[na]||false;},setLoadingEditComposerAttachment:function(na,oa){v[oa]=na;this.emit('composerChange');},setCreateComposerState:function(na,oa){x[oa||k]=na;this.emit('composerChange');},getCreateComposerState:function(na){return x[na||k]||null;},getCreateComposerContent:function(na){return this._editorStateToComposerPayload(this.getCreateComposerState(na));},isEmptyCreateComposer:function(na){return this.getLoadingCreateComposerAttachment(na)||this.getCreateComposerContent(na).visibleValue.trim()===''&&!this.getCreateComposerAttachment(na);},setEditComposerState:function(na,oa){y[oa]=na;this.emit('composerChange');},getEditComposerState:function(na){return y[na];},getEditComposerContent:function(na){return this._editorStateToComposerPayload(this.getEditComposerState(na));},isEmptyEditComposer:function(na){return this.getLoadingEditComposerAttachment(na)||this.getEditComposerContent(na).visibleValue.trim()===''&&!this.getEditComposerAttachment(na);},hasTextChanged:function(na,oa){return na.trim()!==oa.trim();},hasAttachmentChanged:function(na,oa){if(na){return oa?na.fbid!==oa.fbid:true;}else return !!oa;},hasCommentChanged:function(na,oa){var pa=this.getByID(na);return this.hasTextChanged(oa.encodedValue,pa.body.text)||this.hasAttachmentChanged(t[na],pa.photo_comment||pa.stickerComment);},_editorStateToComposerPayload:function(na){if(!na)return l;var oa=na.getCurrentContent(),pa=c('getVisibleValueForContentState')(oa),qa=c('getMentionsTextForContentState')(oa);return {visibleValue:pa,encodedValue:qa};},hasAttachment:function(){var na=Object.keys(u);for(var oa=0;oa<na.length;oa++)if(u[na[oa]]||s[na[oa]])return true;return false;},getActorIDs:function(){return Object.keys(q.actors);},getModerateURL:function(){return q.moderateURL;},isLoggedIn:function(){return q.user.id!==la.LOGGED_OUT_USER;},isPlatoformEnabled:function(na){return q.actorsOptIn[na];},isMobile:function(){return q.isMobile;},useLegacyMentionsInput:function(){return this.isMobile();},useCustomActorSelector:function(){return document.body.offsetWidth<450;},isViewerModerator:function(){return q.isModerator;},hasUnloadedComments:function(){return !!q.afterCursor;},hasUnloadedReplies:function(na){var oa=this.getByID(na).public_replies;if(!oa)return false;if(oa.afterCursor)return true;if((!oa.commentIDs||oa.commentIDs.length===0)&&oa.totalCount>0)return true;return false;},getUnloadedCommentsCount:function(){return q.totalCount-o.length;},getDialogWidth:function(){return Math.min(document.body.offsetWidth-10,this.isMobile()?320:445);},dispatcherIndex:c('DevxFluxDispatcher').register(function(na){da(na.action);if(c('CommentsPluginConfig').commentsPluginDisableOptOutUsers){ha(na);}else{var oa;fa(na.action,(oa=ma[na.action]).bind.apply(oa,[ma].concat(na.args)));}}),init:function(na,oa,pa){q=oa;this.updateCommentData(na,pa);Object.keys(q.actors).forEach(function(qa){return p[qa]=q.actors[qa];});this.setActor(q.userID);},updateCommentData:function(na,oa){o=na.commentIDs;p=this.initComments(o,na.idMap);w.ordering=oa;},initComment:function(na){na.collapsed=false;na.editor=false;na.composer=false;na.deleted=false;na.flagged=false;return na;},initComments:function(na,oa){na.forEach((function(pa){return oa[pa]=this.initComment(oa[pa]);}).bind(this));return oa;},emit:undefined,addListener:undefined,removeCurrentListener:undefined,ActionHandler:undefined};c('mixInEventEmitter')(la,m);var ma={ban:function(na){var oa=la.getByID(na);oa.deleted=true;la.emit('change');var pa=c('XPluginCommentsBanAuthorAsyncController').getURIBuilder().setString('comment_id',na).getURI();new (c('AsyncRequest'))(pa).setMethod('POST').setData({ban:true,source:c('DeveloperCommentsModerationSource').URL}).send();},hide:function(na){var oa=la.getByID(na);oa.deleted=true;la.emit('change');var pa=c('XPluginCommentsHideCommentAsyncController').getURIBuilder().setInt('url_id',q.targetFBID).setEnum('action',c('DeveloperCommentsModerationAction').DELETE).setEnum('type',c('DeveloperCommentsModerationType').APPROVED).getURI();new (c('AsyncRequest'))(pa).setData({comment_ids:[na]}).setMethod('POST').send();},addComment:function(){var na=la.getCreateComposerContent(),oa=this._getAttachmentFBID(la.getCreateComposerAttachment()),pa=c('XPluginCommentsCreateCommentAsyncController').getURIBuilder().setInt('target_id',q.targetFBID).getURI();new (c('AsyncRequest'))(pa).setData({app_id:q.appID,av:la.getUser().id,text:na.encodedValue,attached_photo_fbid:oa.photoFBID,attached_sticker_fbid:oa.stickerFBID,post_to_feed:la.getPostToFeed(),iframe_referer:q.iframeReferer}).setMethod('POST').setHandler((function(qa){var ra=qa.payload,sa=ra.commentID;this._prependComment(ra.idMap[sa]);delete x[k];la.emit('composerCommentAdded',{});ka('commentCreated',{commentID:sa,message:na.visibleValue});if(ra.sentryAction)la.emit('sentryAction',ra.sentryAction,sa);}).bind(this)).setErrorHandler(function(qa){delete p[k];o.shift();la.emit('change');la.emit('postError',qa);}).send();this._prependComment({authorID:q.user.id,targetID:q.targetFBID,body:{text:na.visibleValue}});},addReply:function(na){var oa=la.getCreateComposerContent(na),pa=this._getAttachmentFBID(la.getCreateComposerAttachment(na)),qa=c('XPluginCommentsCreateReplyAsyncController').getURIBuilder().setString('parent_comment_id',na).getURI(),ra=k+c('uniqueID')();new (c('AsyncRequest'))(qa).setData({app_id:q.appID,av:la.getUser().id,text:oa.encodedValue,attached_photo_fbid:pa.photoFBID,attached_sticker_fbid:pa.stickerFBID,iframe_referer:q.iframeReferer,replied_to:la.getByID(na).replyToCommentID}).setMethod('POST').setHandler(function(ua){var va=la.getByID(na),wa=Object.assign({},va.public_replies);Object.assign(p,ua.payload.idMap);va=la.getByID(na);va.public_replies=wa;delete p[ra];delete x[na];o.splice(o.indexOf(ra),1);va.composer=false;delete va.replyToCommentID;va.public_replies.commentIDs.pop();va.public_replies.commentIDs.push(ua.payload.commentID);ka('commentCreated',{commentID:ua.payload.commentID,parentCommentID:na,message:oa.visibleValue});la.emit('change');}).setErrorHandler(function(ua){delete p[ra];o.splice(o.indexOf(ra),1);sa=la.getByID(na);sa.public_replies.commentIDs.pop();sa.public_replies.totalCount--;sa.composer=false;delete sa.replyToCommentID;la.emit('change');la.emit('postError',ua);}).send();var sa=la.getByID(na),ta=Object.assign({},sa.public_replies);if(!ta.commentIDs)ta.commentIDs=[];if(!ta.totalCount)ta.totalCount=0;ta.totalCount++;ta.commentIDs.push(ra);sa.public_replies=ta;p[ra]={authorID:q.user.id,body:{text:oa.visibleValue},targetID:na,id:ra};o.push(ra);la.emit('change');},_prependComment:function(na){if(!na.id){na.id=k;}else{o.shift();delete p[k];}o.unshift(na.id);p[na.id]=la.initComment(na);la.emit('change');},_getAttachmentFBID:function(na){var oa=0,pa=0;if(na)if(na.type==='photo'){oa=c('nullthrows')(na.fbid);}else if(na.type==='sticker')pa=c('nullthrows')(na.fbid);return {photoFBID:oa,stickerFBID:pa};},edit:function(na,oa){var pa=la.getByID(na);pa.editor=true;pa.prefillText=oa;la.emit('change');},saveEdit:function(na){var oa=JSON.parse(JSON.stringify(la.getByID(na))),pa=c('XPluginCommentsEditCommentAsyncController').getURIBuilder().getURI(),qa=la.getEditComposerContent(na),ra=this._getAttachmentFBID(la.getEditComposerAttachment(na)),sa=la.hasCommentChanged(na,qa);if(sa){new (c('AsyncRequest'))(pa).setMethod('POST').setData({app_id:q.appID,text:qa.encodedValue,comment_id:na,av:la.getAuthor(na).id,attached_photo_fbid:ra.photoFBID,attached_sticker_fbid:ra.stickerFBID,iframe_referer:q.iframeReferer}).setHandler(function(ua){var va=ua.payload;p[va.commentID]=la.initComment(va.idMap[va.commentID]);delete y[na];la.emit('change');}).setErrorHandler(function(ua){oa.editor=false;Object.assign(la.getByID(na),oa);la.emit('change');la.emit('postError',ua);}).send();var ta=la.getByID(na);ta.editor=false;ta.body.text=qa.visibleValue;delete ta.ranges;la.emit('change');}else this.cancelEdit(na);},cancelEdit:function(na){var oa=la.getByID(na);oa.editor=false;la.emit('change');},'delete':function(na){var oa=la.getByID(na);oa.deleted=true;var pa=c('XPluginCommentsDeleteCommentAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))(pa).setData({app_id:q.appID,comment_id:na,av:la.getAuthor(na).id,iframe_referer:q.iframeReferer}).setMethod('POST').setHandler(function(){return (ka('commentRemoved',{commentID:na}));}).setErrorHandler(function(qa){var ra=la.getByID(na);ra.deleted=false;la.emit('change');}).send();la.emit('change');},like:function(na){var oa=la.getByID(na),pa=c('XPluginCommentsLikeCommentAsyncController').getURIBuilder().setBool('action_like',!oa.hasLiked).getURI();new (c('AsyncRequest'))(pa).setData({app_id:q.appID,comment_id:oa.id,iframe_referer:q.iframeReferer}).setMethod('POST').setHandler(function(qa){var ra=qa.payload;Object.assign(p[ra.commentID],la.initComment(ra.idMap[ra.commentID]));la.emit('change');}).setErrorHandler(function(qa){oa.likeCount--;oa.hasLiked=false;la.emit('postError',qa);}).send();oa.hasLiked=!oa.hasLiked;if(oa.hasLiked){oa.likeCount++;}else if(oa.likeCount>0)oa.likeCount--;p[oa.id]=oa;la.emit('change');},sort:function(na){var oa=c('XPluginCommentsPagerAsyncController').getURIBuilder().setInt('target_id',q.targetFBID).setEnum('ordering',na).getURI();new (c('AsyncRequest'))(oa).setMethod('POST').setData({app_id:q.appID,limit:la.getPageSize(),iframe_referer:q.iframeReferer}).setHandler(function(pa){var qa=pa.payload;q.afterCursor=qa.afterCursor;la.updateCommentData(qa,na);la.emit('sortingCompleted');la.emit('change');}).send();},showMoreComments:function(){var na=c('XPluginCommentsPagerAsyncController').getURIBuilder().setInt('target_id',q.targetFBID).setEnum('ordering',la.getCurrentSorting()).getURI();new (c('AsyncRequest'))(na).setMethod('POST').setData({app_id:q.appID,after_cursor:q.afterCursor,limit:la.getPageSize(),deeplinked_comment_id:q.deeplinkedCommentID,iframe_referer:q.iframeReferer}).setHandler(function(oa){var pa=oa.payload;q.afterCursor=pa.afterCursor;o=o.concat(pa.commentIDs).filter(ja);p=Object.assign(p,la.initComments(pa.commentIDs,pa.idMap));la.emit('moreCommentsCompleted');la.emit('change');}).setErrorHandler(function(oa){la.emit('postError',oa);la.emit('moreCommentsCompleted');}).send();},setUser:function(na){la.setActor(na);la.emit('actorChange');},setPostToFeed:function(na){la.setPostToFeed(na);},showMoreReplies:function(na){var oa=c('XPluginCommentsRepliesPagerAsyncController').getURIBuilder().setString('comment_id',na).getURI(),pa=la.getByID(na).public_replies;new (c('AsyncRequest'))(oa).setMethod('POST').setData({app_id:q.appID,after_cursor:pa.afterCursor,limit:la.getPageSize(),iframe_referer:q.iframeReferer}).setHandler(function(qa){var ra=qa.payload;p=Object.assign(la.initComments(ra.commentIDs,ra.idMap),p);pa.afterCursor=ra.afterCursor;pa.commentIDs=pa.commentIDs.concat(ra.commentIDs).filter(ja);la.emit('moreRepliesCompleted',{commentID:na});la.emit('change');}).setErrorHandler(function(qa){la.emit('postError',qa);la.emit('moreRepliesCompleted',{commentID:na});}).send();},toggleVisibility:function(na){var oa=la.getByID(na);oa.collapsed=!oa.collapsed;la.emit('change');},flag:function(na){p[na].flagged=true;this._sendFlagOrUnflagRequest(na,'flag');la.emit('change');},unflag:function(na){p[na].flagged=false;this._sendFlagOrUnflagRequest(na,'unflag');la.emit('change');},_sendFlagOrUnflagRequest:function(na,oa){var pa=c('XPluginCommentsFlagCommentAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))(pa).setData({app_id:q.appID,comment_id:na,iframe_referer:q.iframeReferer,unflag:oa==='unflag'}).setMethod('POST').setErrorHandler(function(qa){p[na].flagged=!p[na].flagged;la.emit('postError',qa);}).send();},report:function(na){window.open(la.getByID(na).reportURI,'_blank');},showReplyComposer:function(na,oa){var pa=la.getByID(na);if(la.isReply(na)){var qa=na;pa=la.getByID(pa.targetID);pa.replyToCommentID=qa;}pa.prefillText=oa;pa.composer=true;la.emit('change');},cancelReply:function(na){var oa=la.getByID(na);oa.composer=false;delete oa.replyToCommentID;la.emit('change');},restorePreviousState:function(){var na=c('WebStorage').getSessionStorage();if(na){var oa=JSON.parse(na.getItem('previousState'));na.clear();var pa=la.getCommentIDs();if(oa.action){var qa={};qa.action=oa.action;qa.args=oa.commentIDs;ha(qa);}var ra=oa.replies,sa=oa.edits;pa.map((function(ta){if(ra[ta])this.showReplyComposer(ta,ra[ta]);if(sa[ta])this.edit(ta,sa[ta]);}).bind(this));if(oa.commentBody)la.emit('previousComposerCommentPrefill',{prefillText:oa.commentBody});}}};la.ActionHandler=ma;f.exports=la;},null);
__d('CommentsPluginActions',['CommentsPluginStore','DevxProxyActions'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new (c('DevxProxyActions'))(c('CommentsPluginStore'));},null);
__d("XDeveloperDocumentationController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/docs\/{?path1}\/{?path2}\/{?path3}\/{?path4}\/{?path5}\/{?path6}\/",{path:{type:"String"},version:{type:"String"},preview:{type:"Exists",defaultValue:false},revisionid:{type:"Int"},locale:{type:"String"},path1:{type:"String"},path2:{type:"String"},path3:{type:"String"},path4:{type:"String"},path5:{type:"String"},path6:{type:"String"}});},null);
__d('CommentsPluginFooter.react',['cx','ImageBlock.react','React','XDeveloperDocumentationController'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_5lm5 _2pi3 _3-8y"},c('React').createElement(c('ImageBlock.react'),null,c('React').createElement('img',{src:'/images/like/icons/fav.png'}),c('React').createElement('a',{target:'_blank',href:c('XDeveloperDocumentationController').getURIBuilder().setString('path1','plugins').setString('path2','comments').getURI().setSubdomain('developers')},'Facebook Comments Plugin'))));};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('CommentsPluginHeader.react',['cx','fbt','CommentsPluginActions','CommentsPluginStore','DeveloperCommentsPluginOrdering','LeftRight.react','Link.react','React','XUISelector.react','XUISpinner.react','XUIText.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';var l=c('XUISelector.react').Option;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.state={sorting:false};var o=this;o.$CommentsPluginHeader1=this.$CommentsPluginHeader1.bind(this);}m.prototype.$CommentsPluginHeader1=function(event){this.setState({sorting:true});c('CommentsPluginStore').addListener('sortingCompleted',(function(){this.setState({sorting:false});c('CommentsPluginStore').removeCurrentListener();}).bind(this));c('CommentsPluginActions').sort(event.value);};m.prototype.render=function(){var n=null;if(c('CommentsPluginStore').getModerateURL())n=c('React').createElement('span',null,c('React').createElement('span',{className:"_52bm"},'|'),c('React').createElement(c('Link.react'),{href:c('CommentsPluginStore').getModerateURL(),target:'_blank'},i._("\u30e2\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb")));return (c('React').createElement(c('LeftRight.react'),{className:"_491z"},c('React').createElement('span',null,c('React').createElement(c('XUIText.react'),{weight:'bold'},c('CommentsPluginStore').getCommentsCount()!==1?i._("\u30b3\u30e1\u30f3\u30c8{count}\u4ef6",[i.param('count',c('CommentsPluginStore').getCommentsCount())]):i._("\u30b3\u30e1\u30f3\u30c81\u4ef6")),n),c('React').createElement('div',null,this.state.sorting?c('React').createElement(c('XUISpinner.react'),{size:'small',className:"_3-90"}):null,c('React').createElement('span',{className:"_pup"},i._("\u4e26\u3073\u66ff\u3048")),' ',c('React').createElement(c('XUISelector.react'),{alignh:'right',className:"_3-8_",initialValue:c('CommentsPluginStore').getCurrentSorting(),onChange:this.$CommentsPluginHeader1},c('DeveloperCommentsPluginOrdering').__types.map(function(o){return (c('React').createElement(l,{value:o,key:o},c('DeveloperCommentsPluginOrdering').__labels[o]));})))));};f.exports=m;},null);
__d('CommentsPluginAction',['fbt'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={EDIT:'edit',DELETE:'delete',FLAG:'flag',UNFLAG:'unflag',SETUSER:'setUser',BAN:'ban',HIDE:'hide',REPORT:'report',COLLAPSE:'collapse',SHOW:'show',getLabel:function(j){switch(j){case i.COLLAPSE:return h._("\u30b3\u30e1\u30f3\u30c8\u3092\u9589\u3058\u308b");case i.SHOW:return h._("\u30b3\u30e1\u30f3\u30c8\u3092\u8868\u793a");case i.EDIT:return h._("\u30b3\u30e1\u30f3\u30c8\u3092\u7de8\u96c6");case i.DELETE:return h._("\u30b3\u30e1\u30f3\u30c8\u3092\u524a\u9664");case i.FLAG:return h._("\u30b3\u30e1\u30f3\u30c8\u3092\u30d5\u30e9\u30b0");case i.UNFLAG:return h._("\u30b3\u30e1\u30f3\u30c8\u306e\u30d5\u30e9\u30b0\u89e3\u9664");case i.BAN:return h._("\u30e6\u30fc\u30b6\u30fc\u3092\u30d6\u30ed\u30c3\u30af");case i.HIDE:return h._("\u30b3\u30e1\u30f3\u30c8\u3092\u975e\u8868\u793a\u306b\u3059\u308b");case i.REPORT:return h._("Facebook\u306b\u5831\u544a");case i.SETUSER:return h._("\u5225\u306e\u30a2\u30ab\u30a6\u30f3\u30c8");}},getMenuActions:function(){return [i.COLLAPSE,i.SHOW,i.EDIT,i.DELETE,i.FLAG,i.UNFLAG,i.BAN,i.HIDE,i.REPORT];}};f.exports=i;},null);
__d('MixinCommentsPluginConfirmAction',['fbt','invariant','CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','React','Set','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={componentWillMount:function(){this.setState({actionConfirmationShown:false,action:null,id:null});},requiresConfirmation:function(k){var l=new (c('Set'))([c('CommentsPluginAction').DELETE,c('CommentsPluginAction').BAN,c('CommentsPluginAction').HIDE]);return l.has(k);},confirmAction:function(k,l){this.setState({actionConfirmationShown:true,action:k,id:l});},_onActionConfirmed:function(){c('CommentsPluginActions')[this.state.action](this.state.id);this.setState({actionConfirmationShown:false});},_onActionCancelled:function(){this.setState({actionConfirmationShown:false});},_getActionMetadata:function(k){switch(k){case c('CommentsPluginAction').DELETE:return {body:h._("\u3053\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f"),button_label:h._("\u524a\u9664\u3092\u78ba\u8a8d")};case c('CommentsPluginAction').BAN:return {body:h._("\u3053\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u30d6\u30ed\u30c3\u30af\u3057\u307e\u3059\u304b\uff1f"),button_label:h._("\u30d6\u30ed\u30c3\u30af\u3059\u308b")};case c('CommentsPluginAction').HIDE:return {body:h._("\u3053\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u975e\u8868\u793a\u306b\u3057\u307e\u3059\u304b\uff1f"),button_label:h._("\u975e\u8868\u793a\u306b\u3059\u308b")};case c('CommentsPluginAction').SETUSER:return {body:h._("Commenting as another account will clear the attachments you've uploaded."),button_label:h._("\u5225\u306e\u30a2\u30ab\u30a6\u30f3\u30c8")};default:i(0);}},renderActionConfirmationDialog:function(){var k=this.state.action;if(!k)return null;var l=this._getActionMetadata(k);return (c('React').createElement(c('XUIDialog.react'),{shown:this.state.actionConfirmationShown,width:c('CommentsPluginStore').getDialogWidth()},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},c('CommentsPluginAction').getLabel(k)),c('React').createElement(c('XUIDialogBody.react'),null,l.body),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),{onClick:this._onActionCancelled.bind(this)}),c('React').createElement(c('XUIDialogButton.react'),{use:'confirm',label:l.button_label,onClick:this._onActionConfirmed.bind(this)}))));}};f.exports=j;},null);
__d('CommentsPluginCommentActions.react',['cx','fbt','ActionList.react','CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','Image.react','Link.react','MixinCommentsPluginConfirmAction','React','UFICommentMetadata.react','classWithMixins','mixin'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('classWithMixins')(c('React').Component,c('mixin')(c('MixinCommentsPluginConfirmAction'))));k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);var p=this;p.$CommentsPluginCommentActions1=this.$CommentsPluginCommentActions1.bind(this);p.$CommentsPluginCommentActions2=this.$CommentsPluginCommentActions2.bind(this);p.$CommentsPluginCommentActions3=this.$CommentsPluginCommentActions3.bind(this);}m.prototype.$CommentsPluginCommentActions3=function(){c('CommentsPluginActions').like(this.props.commentID);};m.prototype.$CommentsPluginCommentActions2=function(){c('CommentsPluginActions').showReplyComposer(this.props.commentID);};m.prototype.$CommentsPluginCommentActions1=function(){c('CommentsPluginActions').flag(this.props.commentID);};m.prototype.$CommentsPluginCommentActions4=function(n){if(!n.canLike&&c('CommentsPluginStore').isLoggedIn())return null;return (c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginCommentActions3},n.hasLiked?i._("\u3044\u3044\u306d\uff01\u3092\u53d6\u308a\u6d88\u3059"):i._("\u3044\u3044\u306d\uff01")));};m.prototype.render=function(){var n=c('CommentsPluginStore').getByID(this.props.commentID);return (c('React').createElement(c('ActionList.react'),{className:"_2vq9"},this.$CommentsPluginCommentActions4(n),c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginCommentActions2},i._("\u8fd4\u4fe1")),c('CommentsPluginStore').isMobile()?n.canEdit?c('React').createElement(c('Link.react'),{onClick:this.confirmAction.bind(this,c('CommentsPluginAction').DELETE,this.props.commentID)},i._("\u524a\u9664")):c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginCommentActions1},i._("\u30d5\u30e9\u30b0")):null,n.likeCount?c('React').createElement('span',null,c('React').createElement(c('Image.react'),{src:'/images/ufi/fbfeed/like.png',className:"_3-8_ _4iy4"}),n.likeCount):null,c('React').createElement(c('UFICommentMetadata.react'),{comment:n,permalink:n.permalink,shortenTimestamp:true,showPermalink:!c('CommentsPluginStore').isReply(this.props.commentID),permalinkTarget:'_parent'}),c('CommentsPluginStore').isMobile()?this.renderActionConfirmationDialog():null));};m.propTypes={commentID:l.string.isRequired};f.exports=m;},null);
__d('CommentsPluginComposerMirroringNotice.react',['cx','fbt','CommentsPluginStore','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=c('CommentsPluginStore').getMirroredPage();if(!n)return null;return (c('React').createElement('div',{className:"_5sge _2ph-"},n.name?this.props.isReply?i._("Your reply may also appear on {page name}'s Facebook Page.",[i.param('page name',c('React').createElement('a',{href:n.uri,target:'blank'},n.name))]):i._("Your comment may also appear on {page name}'s Facebook Page.",[i.param('page name',c('React').createElement('a',{href:n.uri,target:'blank'},n.name))]):this.props.isReply?i._("Your reply may also appear on Facebook."):i._("Your comment may also appear on Facebook.")));};function m(){j.apply(this,arguments);}m.propTypes={isReply:l.bool};f.exports=m;},null);
__d('CommentsPluginProfilePicture.react',['cx','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement('a',babelHelpers._extends({},this.props,{href:this.props.href}),c('React').createElement('img',{className:(!this.props.isReply?"_1ci":'')+(this.props.isReply?' '+"_1cj":''),src:this.props.src})));};function l(){i.apply(this,arguments);}l.propTypes={href:k.string.isRequired,src:k.string.isRequired,isReply:k.bool};f.exports=l;},null);
__d('CommentsPluginComposer.react',['cx','fbt','ActorURI','AsyncRequest','CommentsPluginStore','CommentsPluginComposerMirroringNotice.react','CommentsPluginConfig','CommentsPluginProfilePicture.react','DraftEntity','EditorState','MentionsInput.react','React','UFIAttachPhotoSection.react','UFIAttachedPhotoPreview.react','UFICommentUtils.react','UFIImageBlock.react','UFIStickerButton.react','XUINotice.react','XUITypeaheadView.react','createEditorStateWithEntities','getMentionsInputDecorator','getVisibleValueForContentState','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';var l=c('React').PropTypes,m=19,n='/ajax/ufi/sticker_preview/';function o(q){return c('DraftEntity').create('MENTION','IMMUTABLE',{id:q.id});}j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(q,r){k.constructor.call(this,q,r);this.state=this.$CommentsPluginComposer1();var s=this;s.$CommentsPluginComposer2=this.$CommentsPluginComposer2.bind(this);s.$CommentsPluginComposer3=this.$CommentsPluginComposer3.bind(this);}p.prototype.$CommentsPluginComposer1=function(q){var r=null,s=null,t=q||this.props.prefillText;if(t){r=this.$CommentsPluginComposer4(t);if(this.props.editCommentID){c('CommentsPluginStore').setEditComposerState(r,this.props.editCommentID);}else c('CommentsPluginStore').setCreateComposerState(r,this.props.parentCommentIDOfNewReply);}else{var u=null,v=null;if(this.props.editCommentID){s=c('CommentsPluginStore').getByID(this.props.editCommentID);r=c('createEditorStateWithEntities')({text:s.body.text,ranges:c('UFICommentUtils.react').shallowCopyRanges(s.ranges).filter(function(y){return !y.entity.external;}),decorator:c('getMentionsInputDecorator')(),entityCreationFn:o});if(s.photo_comment){u=s.photo_comment;this.$CommentsPluginComposer5(u);}else if(s.attachment){v=s.attachment;this.$CommentsPluginComposer5(v);}}else if(this.props.parentCommentIDOfNewReply){s=c('CommentsPluginStore').getByID(this.props.parentCommentIDOfNewReply);if(s.replyToCommentID&&c('CommentsPluginStore').getAuthor(s.replyToCommentID).id!==c('CommentsPluginStore').getUser().id){var w=c('CommentsPluginStore').getAuthor(s.replyToCommentID),x={id:w.id,text:w.name,offset:0,length:w.name.length,entity:{id:w.id}};r=c('EditorState').moveFocusToEnd(c('createEditorStateWithEntities')({text:w.name+' ',ranges:[x],decorator:c('getMentionsInputDecorator')(),entityCreationFn:o}));}}if(!r)r=c('EditorState').createEmpty(c('getMentionsInputDecorator')());}return {editorState:r,expanded:t||!!this.props.alwaysExpanded,attachedPhoto:u,attachedSticker:v};};p.prototype.$CommentsPluginComposer4=function(q){return c('createEditorStateWithEntities')({text:q,decorator:c('getMentionsInputDecorator')()});};p.prototype.$CommentsPluginComposer6=function(){return !this.props.editCommentID&&!this.props.parentCommentIDOfNewReply;};p.prototype.$CommentsPluginComposer5=function(q){if(this.props.editCommentID){c('CommentsPluginStore').setEditComposerAttachment(q,this.props.editCommentID);}else c('CommentsPluginStore').setCreateComposerAttachment(q,this.props.parentCommentIDOfNewReply);};p.prototype.$CommentsPluginComposer7=function(q){if(this.props.editCommentID){c('CommentsPluginStore').setLoadingEditComposerAttachment(q,this.props.editCommentID);}else c('CommentsPluginStore').setLoadingCreateComposerAttachment(q,this.props.parentCommentIDOfNewReply);};p.prototype.$CommentsPluginComposer8=function(){if(this.props.editCommentID){return c('CommentsPluginStore').getLoadingEditComposerAttachment(this.props.editCommentID);}else return c('CommentsPluginStore').getLoadingCreateComposerAttachment(this.props.parentCommentIDOfNewReply);};p.prototype.$CommentsPluginComposer9=function(){return this.state.isLoadingAttachment||!!this.state.attachedSticker||!!this.state.attachedPhoto;};p.prototype.getPhotoUploadData=function(){var q=c('CommentsPluginStore').getUser().id,r={profile_id:q,target_id:this.props.targetID,source:m};r[c('ActorURI').PARAMETER_ACTOR]=q;return r;};p.prototype.onPhotoUploadComplete=function(q){if(!this.$CommentsPluginComposer8())return;var r=q.getPayload();if(r&&r.fbid){r.type='photo';this.$CommentsPluginComposer5(r);this.$CommentsPluginComposer7(false);this.setState({attachedPhoto:r,isLoadingAttachment:false,expanded:true});}else this.resetAttachment(null);};p.prototype.onStickerSelected=function(q){this.$CommentsPluginComposer10();new (c('AsyncRequest'))(n).setData({sticker_id:q}).setErrorHandler(this.resetAttachment.bind(this)).setHandler(this.$CommentsPluginComposer11.bind(this)).send();};p.prototype.$CommentsPluginComposer11=function(q){if(!this.$CommentsPluginComposer8())return;var r=q.getPayload();if(r&&r.fbid){r.type='sticker';this.$CommentsPluginComposer5(r);this.$CommentsPluginComposer7(false);this.setState({attachedSticker:r,isLoadingAttachment:false,expanded:true});}else this.resetAttachment(null);};p.prototype.insertEmoticonToCommentText=function(q){return;};p.prototype.resetAttachment=function(event){this.$CommentsPluginComposer5(undefined);this.$CommentsPluginComposer7(false);this.setState({attachedPhoto:null,attachedSticker:null,isLoadingAttachment:false});};p.prototype.$CommentsPluginComposer10=function(){this.$CommentsPluginComposer5(undefined);this.$CommentsPluginComposer7(true);this.setState({attachedSticker:null,attachedPhoto:null,isLoadingAttachment:true});};p.prototype.componentDidMount=function(){c('CommentsPluginStore').addListener('composerCommentAdded',(function(event){if(this.$CommentsPluginComposer6()){var q=this.$CommentsPluginComposer1();q.expanded=true;this.setState(q);if(this.refs.composer.style)this.refs.composer.style.cssText='';}}).bind(this));c('CommentsPluginStore').addListener('previousComposerCommentPrefill',(function(q){var r=this.$CommentsPluginComposer1(q.prefillText);r.expanded=true;this.setState(r);}).bind(this));if(!this.$CommentsPluginComposer6())this.refs.composer.focus();};p.prototype.$CommentsPluginComposer2=function(q){this.setState({editorState:q});if(this.props.editCommentID){c('CommentsPluginStore').setEditComposerState(q,this.props.editCommentID);}else c('CommentsPluginStore').setCreateComposerState(q,this.props.parentCommentIDOfNewReply);};p.prototype.$CommentsPluginComposer12=function(){if(this.props.editCommentID)return c('CommentsPluginStore').isReply(this.props.editCommentID);return !!this.props.parentCommentIDOfNewReply;};p.prototype.$CommentsPluginComposer3=function(){this.setState({expanded:true});};p.prototype.setFileInput=function(q,r){this.setState({fileInput:q,fileUploader:r});};p.prototype.$CommentsPluginComposer13=function(){return c('getVisibleValueForContentState')(this.state.editorState.getCurrentContent());};p.prototype.$CommentsPluginComposer14=function(q){var r=q.target,s=r.value;r.value='';r.value=s;this.$CommentsPluginComposer3();};p.prototype.$CommentsPluginComposer15=function(q){var r=q.target,s=r.scrollHeight;if(r.offsetHeight<s)r.style.cssText='height:'+s+'px';this.$CommentsPluginComposer2(c('createEditorStateWithEntities')({text:r.value}));};p.prototype.$CommentsPluginComposer16=function(){var q=this.props.placeholder||i._("\u30b3\u30e1\u30f3\u30c8\u3092\u8ffd\u52a0...");if(c('CommentsPluginStore').useLegacyMentionsInput())return (c('React').createElement('textarea',{className:"_1cb"+(' '+"_1u9t")+(this.props.readOnly?' '+"_5pu_":''),placeholder:q,ref:'composer',onFocus:this.$CommentsPluginComposer14.bind(this),onChange:this.$CommentsPluginComposer15.bind(this),readOnly:this.props.readOnly,value:this.$CommentsPluginComposer13()}));return (c('React').createElement(c('MentionsInput.react'),{className:"_1cb"+(this.props.readOnly?' '+"_5pu_":''),editorState:this.state.editorState,mentionsSource:c('CommentsPluginStore').getComposerSearchSource(),onChange:this.$CommentsPluginComposer2,onFocus:this.$CommentsPluginComposer3,placeholder:q,readOnly:this.props.readOnly,typeaheadView:c('XUITypeaheadView.react'),ref:'composer'}));};p.prototype.render=function(){var q=this.props.editCommentID?c('CommentsPluginStore').getAuthor(this.props.editCommentID):q=c('CommentsPluginStore').getUser(),r=this.$CommentsPluginComposer12();return (c('React').createElement(c('UFIImageBlock.react'),{spacing:'medium',className:c('joinClasses')("_4uyl"+(r?' '+"_1zz6":'')+(!this.state.expanded?' '+"_1zz7":'')+(!!this.state.expanded?' '+"_1zz8":''),this.props.className)},c('CommentsPluginStore').useCustomActorSelector()?c('React').createElement('div',null):c('React').createElement(c('CommentsPluginProfilePicture.react'),{href:q.uri,src:q.thumbSrc,isReply:r,target:'_blank'}),c('React').createElement('div',null,c('React').createElement('div',{className:'UFIInputContainer'},this.$CommentsPluginComposer16(),c('React').createElement('div',{className:"UFICommentAttachmentButtons"+(' '+"clearfix")+(!c('CommentsPluginConfig').commentsPluginZemeckisAttachments||!this.props.allowPhotoAttachments||this.$CommentsPluginComposer9()?' '+"hidden_elem":'')},c('React').createElement(c('UFIAttachPhotoSection.react'),{onPhotoUploadComplete:this.onPhotoUploadComplete.bind(this),getPhotoUploadData:this.getPhotoUploadData.bind(this),prepareForAttachedPhotoPreview:this.$CommentsPluginComposer10.bind(this),setFileInput:this.setFileInput.bind(this),attachment:this.state.attachedPhoto}),c('React').createElement(c('UFIStickerButton.react'),{onStickerSelected:this.onStickerSelected.bind(this),onEmoticonSelected:this.insertEmoticonToCommentText.bind(this)}))),c('React').createElement(c('UFIAttachedPhotoPreview.react'),{attachedPhoto:this.state.attachedPhoto,attachedSticker:this.state.attachedSticker,onRemoveAttachedPhotoPreview:this.resetAttachment.bind(this),onRemoveAttachedStickerPreview:this.resetAttachment.bind(this),isLoadingPhoto:this.state.isLoadingAttachment}),this.props.unableToPost?c('React').createElement(c('XUINotice.react'),{use:'warn'},i._({"*":"Comments must be less than {lengthRemain} characters"},[i.param('lengthRemain',c('CommentsPluginStore').getMaxCommentLength(),[0])])):null,this.state.expanded?c('React').createElement('div',{className:"_4uym"},c('React').createElement(c('CommentsPluginComposerMirroringNotice.react'),{isReply:r}),this.props.children):null)));};p.propTypes={editCommentID:l.string,parentCommentIDOfNewReply:l.string,readOnly:l.bool,placeholder:l.node,alwaysExpanded:l.bool,unableToPost:l.bool};f.exports=p;},null);
__d('CommentsPluginComposerEdit.react',['cx','fbt','CommentsPluginActions','CommentsPluginComposer.react','CommentsPluginStore','React','XUIButton.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);this.state={waitingAsyncResponse:false,unableToPost:false};var p=this;p.$CommentsPluginComposerEdit1=this.$CommentsPluginComposerEdit1.bind(this);p.$CommentsPluginComposerEdit2=this.$CommentsPluginComposerEdit2.bind(this);this.$CommentsPluginComposerEdit3=null;}m.prototype.componentDidMount=function(){this.$CommentsPluginComposerEdit3=c('CommentsPluginStore').addListener('composerChange',(function(){var n=c('CommentsPluginStore').getEditComposerContent(this.props.commentID).visibleValue;this.setState({unableToPost:n.trim().length>c('CommentsPluginStore').getMaxCommentLength()});this.forceUpdate();}).bind(this));this.$CommentsPluginComposerEdit4=c('CommentsPluginStore').addListener('actorChange',(function(){this.refs.composer.resetAttachment();this.forceUpdate();}).bind(this));};m.prototype.componentWillUnmount=function(){if(this.$CommentsPluginComposerEdit3)this.$CommentsPluginComposerEdit3.remove();if(this.$CommentsPluginComposerEdit4)this.$CommentsPluginComposerEdit4.remove();};m.prototype.$CommentsPluginComposerEdit1=function(){this.setState({waitingAsyncResponse:true});c('CommentsPluginActions').saveEdit(this.props.commentID);};m.prototype.$CommentsPluginComposerEdit2=function(){this.refs.composer.resetAttachment();c('CommentsPluginActions').cancelEdit(this.props.commentID);};m.prototype.$CommentsPluginComposerEdit5=function(){return (this.state.waitingAsyncResponse||this.state.unableToPost||c('CommentsPluginStore').isEmptyEditComposer(this.props.commentID));};m.prototype.render=function(){var n=c('CommentsPluginStore').getByID(this.props.commentID);return (c('React').createElement(c('CommentsPluginComposer.react'),{alwaysExpanded:true,ref:'composer',prefillText:n.prefillText,readOnly:this.state.waitingAsyncResponse,allowPhotoAttachments:true,editCommentID:this.props.commentID,unableToPost:this.state.unableToPost},c('React').createElement('div',{className:"_5tr6 clearfix _2ph_"},c('React').createElement(c('XUIButton.react'),{disabled:this.$CommentsPluginComposerEdit5(),label:i._("\u4fdd\u5b58"),use:'confirm',className:"rfloat _3-99",onClick:this.$CommentsPluginComposerEdit1}),c('React').createElement(c('XUIButton.react'),{disabled:this.state.waitingAsyncResponse,label:i._("\u30ad\u30e3\u30f3\u30bb\u30eb"),use:'default',className:"rfloat _3-99",onClick:this.$CommentsPluginComposerEdit2})),this.props.children));};m.propTypes={commentID:l.string.isRequired};f.exports=m;},null);
__d('CommentsPluginMenu.react',['fbt','ix','CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','Image.react','MixinCommentsPluginConfirmAction','ReactXUIMenu','PopoverMenu.react','React','Tooltip','classWithMixins','mixin'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';var l=c('React').PropTypes,m=c('ReactXUIMenu').Item;j=babelHelpers.inherits(n,c('classWithMixins')(c('React').Component,c('mixin')(c('MixinCommentsPluginConfirmAction'))));k=j&&j.prototype;function n(o,p){k.constructor.call(this,o,p);this.state={opened:false};var q=this;q.$CommentsPluginMenu1=this.$CommentsPluginMenu1.bind(this);q.$CommentsPluginMenu2=this.$CommentsPluginMenu2.bind(this);q.$CommentsPluginMenu3=this.$CommentsPluginMenu3.bind(this);}n.prototype.isOpen=function(){return this.state.opened;};n.prototype.$CommentsPluginMenu1=function(){this.setState({opened:true});};n.prototype.$CommentsPluginMenu2=function(){this.setState({opened:false});};n.prototype.$CommentsPluginMenu4=function(){c('CommentsPluginActions').toggleVisibility(this.props.commentID);};n.prototype.$CommentsPluginMenu3=function(o,event){var p=event.item.getValue();if(this.requiresConfirmation(p)){this.confirmAction(p,this.props.commentID);}else if(p===c('CommentsPluginAction').SHOW||p===c('CommentsPluginAction').COLLAPSE){this.$CommentsPluginMenu4();}else c('CommentsPluginActions')[p](this.props.commentID);};n.prototype.$CommentsPluginMenu5=function(o,p){var q=c('CommentsPluginStore').isReply(p.id);switch(o){case c('CommentsPluginAction').DELETE:case c('CommentsPluginAction').EDIT:if(!p.canEdit)return null;break;case c('CommentsPluginAction').FLAG:if(p.canEdit||p.collapsed||p.flagged)return null;break;case c('CommentsPluginAction').UNFLAG:if(p.canEdit||!p.flagged)return null;break;case c('CommentsPluginAction').SHOW:if(q||!p.collapsed)return null;break;case c('CommentsPluginAction').COLLAPSE:if(q||p.collapsed||p.flagged)return null;break;case c('CommentsPluginAction').BAN:case c('CommentsPluginAction').HIDE:if(!c('CommentsPluginStore').isViewerModerator())return null;break;case c('CommentsPluginAction').REPORT:if(!p.reportURI)return null;break;default:break;}return (c('React').createElement(m,{value:o,key:o},c('CommentsPluginAction').getLabel(o)));};n.prototype.render=function(){var o=c('CommentsPluginStore').getByID(this.props.commentID);return (c('React').createElement('div',null,c('React').createElement(c('PopoverMenu.react'),{alignh:'right',onShow:this.$CommentsPluginMenu1,onHide:this.$CommentsPluginMenu2,menu:c('React').createElement(c('ReactXUIMenu'),{onItemClick:this.$CommentsPluginMenu3},c('CommentsPluginAction').getMenuActions().map((function(p){return this.$CommentsPluginMenu5(p,o);}).bind(this)))},c('React').createElement('a',null,c('React').createElement(c('Image.react'),babelHelpers._extends({},c('Tooltip').propsFor(h._("\u30e1\u30cb\u30e5\u30fc")),{src:i('/images/plugins/comments/chevron-down.png')})))),this.renderActionConfirmationDialog()));};n.propTypes={commentID:l.string.isRequired};f.exports=n;},null);
__d('CommentsPluginAuthorSelector.react',['cx','fbt','ActorSelector.react','CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','MixinCommentsPluginConfirmAction','React','ShortProfiles','XUIText.react','classWithMixins','joinClasses','mixin'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,c('classWithMixins')(c('React').Component,c('mixin')(c('MixinCommentsPluginConfirmAction'))));k=j&&j.prototype;function l(m){k.constructor.call(this,m);var n=this;n.$CommentsPluginAuthorSelector1=this.$CommentsPluginAuthorSelector1.bind(this);this.actorIDs=c('CommentsPluginStore').getActorIDs();this.state={actorsData:null};}l.prototype.componentWillMount=function(){if(this.actorIDs.length>1&&c('CommentsPluginStore').useCustomActorSelector())c('ShortProfiles').getMulti(this.actorIDs,(function(m){this.setState({actorsData:m});}).bind(this));};l.prototype.$CommentsPluginAuthorSelector1=function(m){if(c('CommentsPluginStore').hasAttachment()){this.confirmAction(c('CommentsPluginAction').SETUSER,m);}else c('CommentsPluginActions').setUser(m);};l.prototype.$CommentsPluginAuthorSelector2=function(m){return i._("{actorName}\u3068\u3057\u3066\u30b3\u30e1\u30f3\u30c8\u3057\u307e\u3059",[i.param('actorName',m)]);};l.prototype.render=function(){if(this.actorIDs.length<=1)return null;var m=c('CommentsPluginStore').getUser().id;if(c('CommentsPluginStore').useCustomActorSelector()){var n=this.state.actorsData;if(!n)return null;return (c('React').createElement('div',{className:"_3-95"},c('React').createElement(c('XUIText.react'),{size:'small',className:"_1y5f _2pih"},i._("Commenting as")),c('React').createElement('select',{value:m,onChange:(function(o){return this.$CommentsPluginAuthorSelector1(o.target.value);}).bind(this),className:"_1y5g"},this.actorIDs.map(function(o){return (c('React').createElement('option',{value:o,key:o},n&&n[o].name));})),this.renderActionConfirmationDialog()));}return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,'inlineBlock')},c('React').createElement(c('ActorSelector.react'),{actorIDs:this.actorIDs,coverEnabled:false,selectedActorID:m,onChange:(function(o){return this.$CommentsPluginAuthorSelector1(o.value);}).bind(this),tooltipConstructor:this.$CommentsPluginAuthorSelector2}),this.renderActionConfirmationDialog()));};f.exports=l;},null);
__d('CommentsPluginComposerReply.react',['cx','fbt','CommentsPluginActions','CommentsPluginAuthorSelector.react','CommentsPluginComposer.react','CommentsPluginStore','React','XUIButton.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);this.state={waitingAsyncResponse:false,unableToPost:false};var p=this;p.$CommentsPluginComposerReply1=this.$CommentsPluginComposerReply1.bind(this);p.$CommentsPluginComposerReply2=this.$CommentsPluginComposerReply2.bind(this);this.$CommentsPluginComposerReply3=null;}m.prototype.componentDidMount=function(){this.$CommentsPluginComposerReply3=c('CommentsPluginStore').addListener('composerChange',(function(){var n=c('CommentsPluginStore').getCreateComposerContent(this.props.commentID).visibleValue;this.setState({unableToPost:n.trim().length>c('CommentsPluginStore').getMaxCommentLength()});this.forceUpdate();}).bind(this));this.$CommentsPluginComposerReply4=c('CommentsPluginStore').addListener('actorChange',(function(){this.refs.composer.resetAttachment();this.forceUpdate();}).bind(this));};m.prototype.componentWillUnmount=function(){if(this.$CommentsPluginComposerReply3)this.$CommentsPluginComposerReply3.remove();if(this.$CommentsPluginComposerReply4)this.$CommentsPluginComposerReply4.remove();};m.prototype.$CommentsPluginComposerReply1=function(){this.setState({waitingAsyncResponse:true});c('CommentsPluginActions').addReply(this.props.commentID);this.refs.composer.resetAttachment();};m.prototype.$CommentsPluginComposerReply2=function(){this.refs.composer.resetAttachment();c('CommentsPluginActions').cancelReply(this.props.commentID);};m.prototype.$CommentsPluginComposerReply5=function(){return (this.state.waitingAsyncResponse||this.state.unableToPost||c('CommentsPluginStore').isEmptyCreateComposer(this.props.commentID));};m.prototype.render=function(){var n=c('CommentsPluginStore').getByID(this.props.commentID);return (c('React').createElement(c('CommentsPluginComposer.react'),{allowPhotoAttachments:true,ref:'composer',alwaysExpanded:true,prefillText:n.prefillText,readOnly:this.state.waitingAsyncResponse,parentCommentIDOfNewReply:this.props.commentID,unableToPost:this.state.unableToPost,placeholder:i._("\u8fd4\u4fe1\u3092\u8ffd\u52a0\u2026")},c('React').createElement('div',{className:"_5tr6 clearfix _2ph_"},c('React').createElement(c('CommentsPluginAuthorSelector.react'),null),c('React').createElement(c('XUIButton.react'),{disabled:this.state.waitingAsyncResponse,label:i._("\u30ad\u30e3\u30f3\u30bb\u30eb"),use:'default',className:"_3-99",onClick:this.$CommentsPluginComposerReply2}),c('React').createElement(c('XUIButton.react'),{disabled:this.$CommentsPluginComposerReply5(),label:i._("\u8fd4\u4fe1\u3059\u308b"),use:'confirm',className:"_3-99",onClick:this.$CommentsPluginComposerReply1}))));};m.propTypes={commentID:l.string.isRequired};f.exports=m;},null);
__d('CommentsPluginComment.react',['cx','fbt','xuiglyph','ActorBio.react','Badge.react','CenteredContainer.react','CommentsPluginActions','CommentsPluginCommentActions.react','CommentsPluginComposerEdit.react','CommentsPluginConfig','CommentsPluginProfilePicture.react','CommentsPluginMenu.react','CommentsPluginComposerReply.react','CommentsPluginStore','HovercardLinkInterpolator','Link.react','Image.react','React','TruncatedTextWithEntities.react','UFIActor.react','UFICommentAttachment.react','UFICommentUtils.react','UFIImageBlock.react','XUIGrayText.react','XUISpinner.react','XUIText.react','joinClasses','nullthrows'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l,m,n;'use strict';var o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(r,s){l.constructor.call(this,r,s);this.state={showMenu:false};var t=this;t.$CommentsPluginComment1=this.$CommentsPluginComment1.bind(this);t.$CommentsPluginComment2=this.$CommentsPluginComment2.bind(this);}p.prototype.$CommentsPluginComment1=function(){this.setState({showMenu:true});};p.prototype.$CommentsPluginComment2=function(){if(!this.refs.menu||!this.refs.menu.isOpen())this.setState({showMenu:false});};p.prototype.render=function(){var r=c('nullthrows')(c('CommentsPluginStore').getByID(this.props.commentID));if(r.deleted)return null;if(r.editor)return (c('React').createElement('div',{className:"_3-8y"},c('React').createElement(c('CommentsPluginComposerEdit.react'),{commentID:this.props.commentID}),c('React').createElement(q,{commentID:this.props.commentID,className:"_3j_p"})));var s=c('UFICommentUtils.react').shallowCopyRanges(r.ranges),t=c('UFICommentUtils.react').getCommentTextWithTruncatedURIs(s,r.body.text),u=null;if(r.collapsed||r.flagged){u=c('React').createElement('div',{className:"_5mlf"},c('React').createElement(c('XUIGrayText.react'),{shade:'light'},i._("\u3053\u306e\u30b3\u30e1\u30f3\u30c8\u306f{action}",[i.param('action',r.collapsed?'collapsed':'flagged')])));}else{if(r.photoComment&&c('CommentsPluginConfig').commentsPluginZemeckisAttachments)r.photo_comment=r.photoComment.photo_comment;if(r.stickerAttachment&&c('CommentsPluginConfig').commentsPluginZemeckisAttachments)r.attachment=r.stickerAttachment.attachment;u=c('React').createElement('div',{className:"_30o4"},t?c('React').createElement(c('TruncatedTextWithEntities.react'),babelHelpers._extends({className:"_5mdd",text:t,ranges:s,interpolator:function(z,aa){return (c('HovercardLinkInterpolator')(z,aa,'_blank'));}},c('CommentsPluginStore').getCommentBodyTruncationLimits(),{renderEmoticons:true,renderEmoji:true})):null,c('React').createElement(c('UFICommentAttachment.react'),{comment:r,disableTheater:true}));}var v=c('nullthrows')(c('CommentsPluginStore').getByID(r.authorID)),w=c('CommentsPluginStore').isOptimisticComment(r),x=c('CommentsPluginStore').isReply(this.props.commentID),y=c('CommentsPluginStore').isMobile();return (c('React').createElement(c('UFIImageBlock.react'),{className:"_3-8y"+(!x?' '+"_5nz1":''),spacing:'medium',onMouseEnter:this.$CommentsPluginComment1,onMouseLeave:this.$CommentsPluginComment2},c('React').createElement(c('CommentsPluginProfilePicture.react'),{href:v.uri,src:v.thumbSrc,isReply:x,target:'_blank'}),c('React').createElement('div',null,c('React').createElement(c('UFIActor.react'),{author:v,delimiter:y?' ':undefined,key:'author',showHovercard:!y,target:'_blank'},v.isVerified?c('React').createElement(c('Badge.react'),{key:'badge',size:'xsmall',type:'verified'}):null,v.bio?c('React').createElement('div',{className:"_4q1v"},c('React').createElement(c('ActorBio.react'),{target:'_blank',preferredTypes:v.bio.preferredTypes,stats:v.bio.stats})):null),c('React').createElement('div',{className:"_3-8m"},u),w||r.collapsed||r.flagged?null:c('React').createElement(c('CommentsPluginCommentActions.react'),{commentID:this.props.commentID}),c('React').createElement(q,{commentID:this.props.commentID})),c('React').createElement('div',null,this.state.showMenu&&!w&&!y?c('React').createElement(c('CommentsPluginMenu.react'),{ref:'menu',commentID:this.props.commentID}):null)));};p.propTypes={commentID:o.string.isRequired};m=babelHelpers.inherits(q,c('React').Component);n=m&&m.prototype;function q(r,s){'use strict';n.constructor.call(this,r,s);this.state={loading:false};var t=this;t.$CommentsPluginCommentReplies1=this.$CommentsPluginCommentReplies1.bind(this);}q.prototype.$CommentsPluginCommentReplies1=function(){'use strict';this.setState({loading:true});c('CommentsPluginStore').addListener('moreRepliesCompleted',(function(event){if(this.props.commentID===event.commentID){this.setState({loading:false});c('CommentsPluginStore').removeCurrentListener();}}).bind(this));c('CommentsPluginActions').showMoreReplies(this.props.commentID);};q.prototype.render=function(){'use strict';var r=c('CommentsPluginStore').getByID(this.props.commentID),s=r.public_replies;if(s===undefined||r.collapsed===true||r.flagged)return r.composer?c('React').createElement('div',{className:c('joinClasses')("_44ri _2pis _3-8y",this.props.className)},c('React').createElement(c('CommentsPluginComposerReply.react'),{commentID:this.props.commentID})):null;if(!s.commentIDs)s.commentIDs=[];var t=s.totalCount-s.commentIDs.length,u=c('CommentsPluginStore').getPageSize(),v=t<u?t:u;return (c('React').createElement('div',{className:c('joinClasses')("_44ri _2pis",this.props.className)},s.commentIDs.map((function(w){if(w===this.props.commentID)return null;return c('React').createElement(p,{commentID:w,key:w});}).bind(this)),c('CommentsPluginStore').hasUnloadedReplies(this.props.commentID)&&t>0?c('React').createElement('div',{className:"_5yct _3-8y _3-96 _2ph-"},this.state.loading?c('React').createElement(c('CenteredContainer.react'),null,c('React').createElement(c('XUISpinner.react'),{size:'small'})):c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginCommentReplies1},c('React').createElement(c('XUIText.react'),{size:'small',weight:'bold'},v===1?i._("\u3053\u306e\u30b9\u30ec\u30c3\u30c9\u306e\u8fd4\u4fe1\u3092\u3055\u3089\u306b1\u4ef6\u8868\u793a"):i._("\u3053\u306e\u30b9\u30ec\u30c3\u30c9\u306e\u8fd4\u4fe1\u3092\u3055\u3089\u306b{number of replies}\u4ef6\u8868\u793a",[i.param('number of replies',v)])),c('React').createElement(c('Image.react'),{src:j({name:'triangle-down'})}))):null,r.composer?c('React').createElement('div',{className:"_3-8y"},c('React').createElement(c('CommentsPluginComposerReply.react'),{commentID:this.props.commentID})):null));};q.propTypes={commentID:o.string.isRequired};f.exports=p;},null);
__d('CommentsPluginLoadMore.react',['cx','fbt','CenteredContainer.react','CommentsPluginActions','CommentsPluginStore','React','XUIButton.react','XUISpinner.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m,n){k.constructor.call(this,m,n);this.state={loading:false};var o=this;o.$CommentsPluginLoadMore1=this.$CommentsPluginLoadMore1.bind(this);}l.prototype.$CommentsPluginLoadMore1=function(){c('CommentsPluginActions').showMoreComments();this.setState({loading:true});c('CommentsPluginStore').addListener('moreCommentsCompleted',(function(){this.setState({loading:false});c('CommentsPluginStore').removeCurrentListener();}).bind(this));};l.prototype.render=function(){var m=c('CommentsPluginStore').getUnloadedCommentsCount();if(!c('CommentsPluginStore').hasUnloadedComments()||m<1)return null;if(this.state.loading)return (c('React').createElement(c('CenteredContainer.react'),{className:"_ndl"},c('React').createElement(c('XUISpinner.react'),{size:'large'})));var n=c('CommentsPluginStore').getPageSize(),o=m<n?m:n;return (c('React').createElement('div',{className:"_5o4h"},c('React').createElement(c('XUIButton.react'),{className:"_1gl3",role:'button',onClick:this.$CommentsPluginLoadMore1,label:o===1?i._("\u3055\u3089\u306b\u30b3\u30e1\u30f3\u30c81\u4ef6\u3092\u8868\u793a"):i._("\u3055\u3089\u306b\u30b3\u30e1\u30f3\u30c8{pagesize}\u4ef6\u3092\u8868\u793a",[i.param('pagesize',o)])})));};f.exports=l;},null);
__d('CommentsPluginListing.react',['cx','CommentsPluginComment.react','CommentsPluginLoadMore.react','CommentsPluginStore','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;'use strict';i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=c('CommentsPluginStore').getCommentIDs(),m=l.map(function(n){return c('React').createElement(c('CommentsPluginComment.react'),{commentID:n,key:n});});return (c('React').createElement('div',{className:"_4k-6"},m,c('React').createElement(c('CommentsPluginLoadMore.react'),null)));};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('CommentsPluginComposerComment.react',['cx','fbt','CommentsPluginActions','CommentsPluginAuthorSelector.react','CommentsPluginComposer.react','CommentsPluginStore','Grid.react','InputLabel.react','LeftRight.react','React','XUIButton.react','XUICheckboxInput.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';var l=c('Grid.react').GridItem;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.state={selectedActorID:c('CommentsPluginStore').getUser().id,postToFeed:false,ablePostToFeed:false,commentLength:0,waitingAsyncResponse:false,unableToPost:false};var o=this;o.$CommentsPluginComposerComment1=this.$CommentsPluginComposerComment1.bind(this);o.$CommentsPluginComposerComment2=this.$CommentsPluginComposerComment2.bind(this);}m.prototype.componentDidMount=function(){c('CommentsPluginStore').addListener('composerChange',(function(){var n=c('CommentsPluginStore').getCreateComposerContent().visibleValue,o=n.trim().length;this.setState({commentLength:o,ablePostToFeed:o>=c('CommentsPluginStore').getMinFeedLength(),unableToPost:o>c('CommentsPluginStore').getMaxCommentLength()});}).bind(this));c('CommentsPluginStore').addListener('composerCommentAdded',(function(){this.setState({waitingAsyncResponse:false});this.refs.composer.resetAttachment();}).bind(this));c('CommentsPluginStore').addListener('login',(function(){this.setState({waitingAsyncResponse:false});}).bind(this));c('CommentsPluginStore').addListener('actorChange',(function(){this.refs.composer.resetAttachment();this.forceUpdate();}).bind(this));};m.prototype.$CommentsPluginComposerComment2=function(event){var n=!this.state.postToFeed;this.setState({postToFeed:n});c('CommentsPluginActions').setPostToFeed(n);};m.prototype.$CommentsPluginComposerComment1=function(){this.setState({waitingAsyncResponse:true});c('CommentsPluginActions').setPostToFeed(this.state.postToFeed);c('CommentsPluginActions').addComment();};m.prototype.$CommentsPluginComposerComment3=function(){return (this.state.waitingAsyncResponse||this.state.unableToPost||c('CommentsPluginStore').isEmptyCreateComposer());};m.prototype.render=function(){var n=c('CommentsPluginStore').isLoggedIn()?i._("\u6295\u7a3f"):i._("\u6295\u7a3f\u3059\u308b\u306b\u306f\u3001\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044"),o=c('CommentsPluginStore').getMinFeedLength()-this.state.commentLength;return (c('React').createElement(c('CommentsPluginComposer.react'),{allowPhotoAttachments:true,ref:'composer',className:"_2392",readOnly:this.state.waitingAsyncResponse,unableToPost:this.state.unableToPost},c('React').createElement(c('LeftRight.react'),{className:"_5tr6 clearfix _2ph-"},!c('CommentsPluginStore').isMirrored()?c('React').createElement(c('Grid.react'),{cols:1},c('React').createElement(l,null,c('React').createElement(c('InputLabel.react'),{className:"_1u0n"},c('React').createElement(c('XUICheckboxInput.react'),{checked:this.state.postToFeed,onChange:this.$CommentsPluginComposerComment2}),c('React').createElement('label',{className:"_3-99 _2ern _50f8 _5kx5"},i._("Facebook\u306b\u3082\u6295\u7a3f")))),c('React').createElement(l,null,this.state.postToFeed&&!this.state.ablePostToFeed?i._({"*":{"character":"Write {lengthRemain} more character to post to Facebook","characters":"Write {lengthRemain} more characters to post to Facebook"}},[i.param('lengthRemain',o,[0]),i['enum'](o===1?'character':'characters',{character:'character',characters:'characters'})]):c('React').createElement('span',null))):c('React').createElement('span',null),c('React').createElement('span',null,c('React').createElement(c('CommentsPluginAuthorSelector.react'),null),c('React').createElement(c('XUIButton.react'),{disabled:this.$CommentsPluginComposerComment3(),label:n,use:'confirm',className:"rfloat _3-99",onClick:this.$CommentsPluginComposerComment1})))));};f.exports=m;},null);
__d("XPluginCommentsConfirmPostToFacebookAsyncDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/{comment_id}\/async\/confirm\/publish\/dialog\/",{comment_id:{type:"String",required:true},__asyncDialog:{type:"Int"}});},null);
__d('CommentsPlugin.react',['cx','fbt','AsyncDialog','AsyncRequest','CommentsPluginActions','CommentsPluginConfig','CommentsPluginFooter.react','CommentsPluginHeader.react','CommentsPluginListing.react','CommentsPluginComposerComment.react','CommentsPluginStore','XPluginCommentsConfirmPostToFacebookAsyncDialogController','DOMQuery','PluginResize','React','ReactDOM','CommentsPluginSentryAction','SimpleXUIDialog','getElementPosition','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.componentWillMount=function(){c('CommentsPluginStore').init(this.props.comments,this.props.meta,this.props.initialOrdering);c('CommentsPluginStore').addListener('postError',function(n){c('SimpleXUIDialog').show(n.errorSummary||i._("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u307b\u3069\u3082\u3046\u4e00\u5ea6\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),null,null,{width:c('CommentsPluginStore').getDialogWidth()});});c('CommentsPluginStore').addListener('sentryAction',function(n,o){switch(n){case c('CommentsPluginSentryAction').CONFIRM_POST_TO_PROFILE:var p=c('XPluginCommentsConfirmPostToFacebookAsyncDialogController').getURIBuilder().setString('comment_id',o).getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(p).setData({iframe_referer:c('CommentsPluginStore').getIframeReferer()}));break;default:break;}});};m.prototype.componentDidMount=function(){var n=c('ReactDOM').findDOMNode(this);c('PluginResize').autoHeight(null,n);new (c('PluginResize'))(function(){},function(){var o=n.offsetHeight,p=c('DOMQuery').scry(document.body,'.uiLayer:not(.hidden_elem) .uiContextualLayer'),q=c('DOMQuery').scry(document.body,'.captcha_dialog');if(p.length===0&&q.length===0)return o;var r=p.length>0?c('getElementPosition')(p[0]):null,s=q.length>0?c('getElementPosition')(q[0]):null;return Math.max(o,r?r.y+r.height+1:0,s?s.height:0);},'resize.iframe',false).resize().auto();c('CommentsPluginStore').addListener('change',(function(){this.forceUpdate();}).bind(this));if(c('CommentsPluginConfig').commentsPluginDisableOptOutUsers&&c('CommentsPluginStore').isOptinReturn())c('CommentsPluginActions').restorePreviousState();};m.prototype.render=function(){return (c('React').createElement('div',{className:c('joinClasses')("_56q9",this.props.className)},c('React').createElement('div',{className:"_2pi8"},c('React').createElement(c('CommentsPluginHeader.react'),null),c('React').createElement(c('CommentsPluginComposerComment.react'),null),c('React').createElement(c('CommentsPluginListing.react'),null),c('React').createElement(c('CommentsPluginFooter.react'),null))));};function m(){j.apply(this,arguments);}m.propTypes={comments:l.object.isRequired,meta:l.object.isRequired,initialOrdering:l.string.isRequired};f.exports=m;},null);